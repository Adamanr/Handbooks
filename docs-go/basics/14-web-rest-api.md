---
sidebar_position: 14
title: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ REST API —Å –ø–∞–∫–µ—Ç–æ–º net/http
---

## –í–≤–µ–¥–µ–Ω–∏–µ

–ü–∞–∫–µ—Ç **net/http** ‚Äî —ç—Ç–æ —Å–µ—Ä–¥—Ü–µ –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤ Go. –û–Ω –≤—Å—Ç—Ä–æ–µ–Ω –≤ —è–∑—ã–∫, –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –±—ã—Å—Ç—Ä—ã–π, –Ω–∞–¥—ë–∂–Ω—ã–π –∏ –¥–∞—ë—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –≤—Å–µ–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º. –ú–Ω–æ–≥–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ (Gin, Echo, Fiber) –ø–æ—Å—Ç—Ä–æ–µ–Ω—ã –ø–æ–≤–µ—Ä—Ö –Ω–µ–≥–æ, –Ω–æ –≤ 2026 –≥–æ–¥—É –≤—Å—ë –±–æ–ª—å—à–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –≤—ã–±–∏—Ä–∞—é—Ç —á–∏—Å—Ç—ã–π `net/http` –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤, API –∏ –¥–∞–∂–µ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π ‚Äî –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –º–µ–Ω—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –ª—É—á—à–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ—â–µ –æ—Ç–ª–∞–¥–∫–∞.

–ú—ã –ø—Ä–æ–π–¥—ë–º –ø—É—Ç—å –æ—Ç "Hello World" –¥–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ REST API —Å middleware, graceful shutdown, –æ–±—Ä–∞–±–æ—Ç–∫–æ–π JSON, —Ñ–∞–π–ª–æ–≤, –æ—à–∏–±–æ–∫ –∏ –ª—É—á—à–∏–º–∏ –ø—Ä–∞–∫—Ç–∏–∫–∞–º–∏. –ü–æ—Å–ª–µ –Ω–µ–≥–æ –≤—ã —Å–º–æ–∂–µ—Ç–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ø–∏—Å–∞—Ç—å —Å–≤–æ–∏ –≤–µ–±-—Å–µ—Ä–≤–∏—Å—ã.

## –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ REST API 

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∞—à–∏—Ö REST API –º—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:
- [Postman](https://www.postman.com/) ‚Äî –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–±–æ—Ä –º–Ω–æ–≥–∏—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è REST API
- [ApiDog](https://apidog.com) ‚Äî –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è REST API. –ò–º–µ–µ—Ç –æ–≥—Ä–æ–º–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –ü—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ –Ω–∞—É—á–∏—Ç—å—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–∏–º –∏–∑-–∑–∞ –µ–≥–æ —É–¥–æ–±—Å—Ç–≤–∞ –∏ –º–æ—â–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π.
- [cURL](https://curl.se/) ‚Äî –ü—Ä–æ—Å—Ç–æ–π –∏ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è REST API

> <br /> –í –¥–∞–Ω–Ω–æ–º —É—Ä–æ–∫–µ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π cURL –∏–∑-–∑–∞ –µ–≥–æ –ø—Ä–æ—Å—Ç–æ—Ç—ã, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –Ω–∞—É—á–∏—Ç—å—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å ApiDog, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ª—É—á—à–∏–π –æ–ø—ã—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ REST API.

## –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–µ—Ä–≤–µ—Ä ‚Äî Hello World

```go
package main

import (
    "fmt"
    "net/http"
)

func main() {
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–æ—Ä–Ω–µ–≤–æ–≥–æ –ø—É—Ç–∏ "/"
    http.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {
        fmt.Fprintf(w, "–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä! üåç\n")
        fmt.Fprintf(w, "–¢–≤–æ–π –ø—É—Ç—å: %s\n", r.URL.Path)
        fmt.Fprintf(w, "–ú–µ—Ç–æ–¥ –∑–∞–ø—Ä–æ—Å–∞: %s\n", r.Method)
    })

    fmt.Println("–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:8080")
    fmt.Println("–ù–∞–∂–º–∏ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏")

    // –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –ø–æ—Ä—Ç—É 8080
    log.Fatal(http.ListenAndServe(":8080", nil))
}
```

**–ß—Ç–æ —Ç—É—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?**
- `http.HandleFunc("/", handler)` ‚Äî –∫–æ–≥–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ "/", –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è.
- `handler` –∏–º–µ–µ—Ç —Å–∏–≥–Ω–∞—Ç—É—Ä—É `func(http.ResponseWriter, *http.Request)`.
- `ResponseWriter` ‚Äî —Ç–æ, –∫—É–¥–∞ —Ç—ã –ø–∏—à–µ—à—å –æ—Ç–≤–µ—Ç (—Ç–µ–∫—Å—Ç, JSON, –∑–∞–≥–æ–ª–æ–≤–∫–∏).
- `*http.Request` ‚Äî –≤—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–ø—Ä–æ—Å–µ: –ø—É—Ç—å, –º–µ—Ç–æ–¥, –∑–∞–≥–æ–ª–æ–≤–∫–∏, —Ç–µ–ª–æ, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.
- `ListenAndServe` –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä –∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç `main()` (–ø–æ—ç—Ç–æ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ–º `log.Fatal` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫).

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `curl`:

```bash
curl -X GET http://localhost:8080

# –ü—Ä–∏–≤–µ—Ç, –º–∏—Ä! üåç
# –¢–≤–æ–π –ø—É—Ç—å: /
# –ú–µ—Ç–æ–¥ –∑–∞–ø—Ä–æ—Å–∞: GET
```


## HTTP-–º–µ—Ç–æ–¥—ã

–ö–æ–≥–¥–∞ —Ç—ã –ø–∏—à–µ—à—å –≤–µ–±-—Å–µ—Ä–≤–∏—Å, –±—Ä–∞—É–∑–µ—Ä –∏–ª–∏ –∫–ª–∏–µ–Ω—Ç (Postman, curl) –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º **–º–µ—Ç–æ–¥–æ–º** ‚Äî —ç—Ç–æ —Å–ª–æ–≤–æ –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ (GET, POST –∏ —Ç.–¥.). –ú–µ—Ç–æ–¥ –≥–æ–≤–æ—Ä–∏—Ç —Å–µ—Ä–≤–µ—Ä—É, **—á—Ç–æ –∏–º–µ–Ω–Ω–æ —Ö–æ—á–µ—Ç —Å–¥–µ–ª–∞—Ç—å –∫–ª–∏–µ–Ω—Ç**.

–í Go (`net/http`) —Ç—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—à—å —É–∑–Ω–∞—Ç—å –º–µ—Ç–æ–¥ —á–µ—Ä–µ–∑ `r.Method` –∏ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –ø–æ-—Ä–∞–∑–Ω–æ–º—É.

### GET ‚Äî "–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö"

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**  
–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ä–µ—Å—É—Ä—Å (–¥–∞–Ω–Ω—ã–µ) —Å —Å–µ—Ä–≤–µ—Ä–∞. **–ù–µ –º–µ–Ω—è–µ—Ç –Ω–∏—á–µ–≥–æ** –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

**–ê–Ω–∞–ª–æ–≥–∏—è:**  
–ó–∞—à—ë–ª –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∏ –ø–æ–ø—Ä–æ—Å–∏–ª –∫–Ω–∏–≥—É –ø–æ—á–∏—Ç–∞—Ç—å ‚Äî –∫–Ω–∏–≥—É —Ç–µ–±–µ –¥–∞–ª–∏, –Ω–æ –æ–Ω–∞ –æ—Å—Ç–∞–ª–∞—Å—å –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ.

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π `/users`
- –ü–æ–ª—É—á–∏—Ç—å –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `/users/42`
- –ü–æ–∏—Å–∫ `/search?q=go`
- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–∞–π—Ç–∞

**–í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π (–Ω–µ –º–µ–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ)
- –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–π (—Å–∫–æ–ª—å–∫–æ –Ω–∏ –≤—ã–∑—ã–≤–∞–π ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ)
- –ú–æ–∂–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ URL (query string): `?name=–ê–Ω—è&age=25`
- –ù–µ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞

> <br /> **–ò–¥–µ–º–ø–æ—Ç–µÃÅ–Ω—Ç–Ω–æ—Å—Ç—å *(¬´—Ä–∞–≤–Ω–æ—Å–∏–ª—å–Ω–æ—Å—Ç—å¬ª)*** ‚Äî —Å–≤–æ–π—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫ –æ–±—ä–µ–∫—Ç—É –¥–∞–≤–∞—Ç—å —Ç–æ—Ç –∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —á—Ç–æ –∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º.

```go
func getUserHandler(w http.ResponseWriter, r *http.Request) {
	// –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∑–∞–ø—Ä–æ—Å GET
    if r.Method != http.MethodGet {
        http.Error(w, "–¢–æ–ª—å–∫–æ GET", http.StatusMethodNotAllowed)
        return
    }
    // ... –æ—Ç–¥–∞—ë–º –¥–∞–Ω–Ω—ã–µ
}

// –ò–ª–∏ —Å Go 1.22+

mux := http.NewServeMux()
mux.HandleFunc("GET /users", getUser)
```

### POST ‚Äî "–°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞"

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**  
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞.

**–ê–Ω–∞–ª–æ–≥–∏—è:**  
–ü—Ä–∏–Ω—ë—Å –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É –Ω–æ–≤—É—é –∫–Ω–∏–≥—É –∏ –æ—Ç–¥–∞–ª –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ä—é ‚Äî —Ç–µ–ø–µ—Ä—å –æ–Ω–∞ –µ—Å—Ç—å –≤ –∫–∞—Ç–∞–ª–æ–≥–µ.

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ú–µ–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞
- –ù–µ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–π (–¥–≤–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö POST ‚Äî –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–∞)
- –î–∞–Ω–Ω—ã–µ –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞ (JSON, —Ñ–æ—Ä–º–∞)
- –û–±—ã—á–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å 201 Created –∏ –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç

```go
func createUserHandler(w http.ResponseWriter, r *http.Request) {
	// –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∑–∞–ø—Ä–æ—Å POST
    if r.Method != http.MethodPost {
        http.Error(w, "–¢–æ–ª—å–∫–æ POST", http.StatusMethodNotAllowed)
        return
    }
    // –ß–∏—Ç–∞–µ–º —Ç–µ–ª–æ, —Å–æ–∑–¥–∞—ë–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    w.WriteHeader(http.StatusCreated)
}

// –ò–ª–∏ —Å Go 1.22+

mux := http.NewServeMux()
mux.HandleFunc("POST /users", createUser)
```

### PUT ‚Äî "–ó–∞–º–µ–Ω–∏ —Ä–µ—Å—É—Ä—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é"

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**  
–ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–º–µ–Ω—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ä–µ—Å—É—Ä—Å –Ω–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

**–ê–Ω–∞–ª–æ–≥–∏—è:**  
–ü—Ä–∏–Ω—ë—Å –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é –∫–Ω–∏–≥–∏ –∏ —Å–∫–∞–∑–∞–ª: "–ó–∞–º–µ–Ω–∏—Ç–µ —Å—Ç–∞—Ä—É—é –ø–æ–ª–Ω–æ—Å—Ç—å—é —ç—Ç–æ–π".

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–≤—Å–µ –ø–æ–ª—è)
- –ó–∞–º–µ–Ω–∞ –≤—Å–µ–≥–æ –æ–±—ä–µ–∫—Ç–∞

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–π (–Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö PUT ‚Äî –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç)
- –ï—Å–ª–∏ —Ä–µ—Å—É—Ä—Å–∞ –Ω–µ—Ç ‚Äî –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å (–Ω–æ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å POST –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è)
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Ç–µ–ª–µ

```go
func updateUserHandler(w http.ResponseWriter, r *http.Request) {
	// –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∑–∞–ø—Ä–æ—Å PUT
    if r.Method != http.MethodPut {
        http.Error(w, "–¢–æ–ª—å–∫–æ PUT", http.StatusMethodNotAllowed)
        return
    }
    // –ü–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
}

// –ò–ª–∏ —Å Go 1.22+

mux := http.NewServeMux()
mux.HandleFunc("PUT /users", updateUserHandler)
```

### PATCH ‚Äî "–ò–∑–º–µ–Ω–∏ —á–∞—Å—Ç—å —Ä–µ—Å—É—Ä—Å–∞"

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**  
–û–±–Ω–æ–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –ø–æ–ª—è —Ä–µ—Å—É—Ä—Å–∞.

**–ê–Ω–∞–ª–æ–≥–∏—è:**  
–ü—Ä–∏—à—ë–ª –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∏ —Å–∫–∞–∑–∞–ª: "–í –∫–Ω–∏–≥–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ 100 –∏—Å–ø—Ä–∞–≤—å—Ç–µ –æ–ø–µ—á–∞—Ç–∫—É".

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ß–∞—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è (—Ç–æ–ª—å–∫–æ email)
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ù–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–π (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
- –í —Ç–µ–ª–µ ‚Äî —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω—è–µ–º—ã–µ –ø–æ–ª—è (—á–∞—Å—Ç–æ JSON Patch –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –æ–±—ä–µ–∫—Ç)

```go
func patchUserHandler(w http.ResponseWriter, r *http.Request) {
	// –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∑–∞–ø—Ä–æ—Å PATCH
    if r.Method != http.MethodPatch {
        http.Error(w, "–¢–æ–ª—å–∫–æ PATCH", http.StatusMethodNotAllowed)
        return
    }
    // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ –ø–æ–ª—è, —á—Ç–æ –ø—Ä–∏—à–ª–∏
}

// –ò–ª–∏ —Å Go 1.22+

mux := http.NewServeMux()
mux.HandleFunc("PATCH /users", patchUserHandler)
```

### DELETE ‚Äî "–£–¥–∞–ª–∏ —Ä–µ—Å—É—Ä—Å"

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**  
–£–¥–∞–ª—è–µ—Ç —Ä–µ—Å—É—Ä—Å —Å —Å–µ—Ä–≤–µ—Ä–∞.

**–ê–Ω–∞–ª–æ–≥–∏—è:**  
–ü–æ–ø—Ä–æ—Å–∏–ª –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ä—è —É–±—Ä–∞—Ç—å –∫–Ω–∏–≥—É —Å –ø–æ–ª–∫–∏ –Ω–∞–≤—Å–µ–≥–¥–∞.

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- –û—á–∏—Å—Ç–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–π (—É–¥–∞–ª—è–µ—à—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π ‚Äî 200/204, —É–¥–∞–ª—è–µ—à—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π ‚Äî —Ç–æ–∂–µ 204)
- –û–±—ã—á–Ω–æ –±–µ–∑ —Ç–µ–ª–∞
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 204 No Content (–µ—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ)

```go
func deleteUserHandler(w http.ResponseWriter, r *http.Request) {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∑–∞–ø—Ä–æ—Å DELETE
    if r.Method != http.MethodDelete {
        http.Error(w, "–¢–æ–ª—å–∫–æ DELETE", http.StatusMethodNotAllowed)
        return
    }
    // –£–¥–∞–ª—è–µ–º
    w.WriteHeader(http.StatusNoContent) // 204
}

// –ò–ª–∏ —Å Go 1.22+

mux := http.NewServeMux()
mux.HandleFunc("DELETE /users", deleteUserHandler)
```

#### –î—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã (–∫–æ—Ä–æ—Ç–∫–æ)

- **HEAD** ‚Äî –∫–∞–∫ GET, –Ω–æ –±–µ–∑ —Ç–µ–ª–∞ –æ—Ç–≤–µ—Ç–∞ (—Ç–æ–ª—å–∫–æ –∑–∞–≥–æ–ª–æ–≤–∫–∏). –ò—Å–ø–æ–ª—å–∑—É—é—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è.
- **OPTIONS** ‚Äî —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç, –∫–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –¥–ª—è –ø—É—Ç–∏. –ë—Ä–∞—É–∑–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–ª—è CORS.
- **TRACE** ‚Äî –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (—Ä–µ–¥–∫–æ).
- **CONNECT** ‚Äî –¥–ª—è —Ç—É–Ω–Ω–µ–ª–µ–π (proxies).

### –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –ú–µ—Ç–æ–¥  | –ú–µ–Ω—è–µ—Ç —Å–µ—Ä–≤–µ—Ä? | –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–π? | –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ | –¢–∏–ø–∏—á–Ω—ã–π —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞       | –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è          |
|-------|----------------|---------------|--------------|-----------------------------|-------------------------------|
| GET    | –ù–µ—Ç            | –î–∞            | –ù–µ—Ç          | 200 OK                      | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| POST   | –î–∞             | –ù–µ—Ç           | –î–∞           | 201 Created                 | –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è   |
| PUT    | –î–∞             | –î–∞            | –î–∞           | 200 OK –∏–ª–∏ 201 Created      | –ü–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞ –ø—Ä–æ—Ñ–∏–ª—è         |
| PATCH  | –î–∞             | –ò–Ω–æ–≥–¥–∞        | –î–∞           | 200 OK                      | –ò–∑–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ email         |
| DELETE | –î–∞             | –î–∞            | –û–±—ã—á–Ω–æ –Ω–µ—Ç   | 204 No Content              | –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è          |

### –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –≤ Go

—Å Go 1.22+ —Ä–æ—É—Ç–∏–Ω–≥–æ–º:

```go
mux.HandleFunc("GET /users/{id}", getUser)
mux.HandleFunc("POST /users", createUser)
mux.HandleFunc("PUT /users/{id}", updateUser)
mux.HandleFunc("PATCH /users/{id}", patchUser)
mux.HandleFunc("DELETE /users/{id}", deleteUser)
```

–†–∞–Ω–Ω—è—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–µ—Ç–æ–¥–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤:

```go
func userHandler(w http.ResponseWriter, r *http.Request) {
    switch r.Method {
    case http.MethodGet:
        // –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    case http.MethodPut:
        // –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–º–µ–Ω–∏—Ç—å
    case http.MethodPatch:
        // —á–∞—Å—Ç–∏—á–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å
    case http.MethodDelete:
        // —É–¥–∞–ª–∏—Ç—å
    default:
        http.Error(w, "–ú–µ—Ç–æ–¥ –Ω–µ —Ä–∞–∑—Ä–µ—à—ë–Ω", http.StatusMethodNotAllowed)
    }
}
```

## –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø—É—Ç–∏

–í —á–∏—Å—Ç–æ–º `net/http` –Ω–µ –±—ã–ª–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —Ä–æ—É—Ç–∏–Ω–≥–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –¥–æ Go 1.22. –° 1.22 –ø–æ—è–≤–∏–ª—Å—è –ø–∞—Ç—Ç–µ—Ä–Ω-—Ä–æ—É—Ç–∏–Ω–≥ –∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

```go
mux := http.NewServeMux()

mux.HandleFunc("GET /users/{id}", func(w http.ResponseWriter, r *http.Request) {
    id := r.PathValue("id") // "42"
    fmt.Fprintf(w, "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å ID: %s", id)
})

mux.HandleFunc("GET /files/{path...}", func(w http.ResponseWriter, r *http.Request) {
    path := r.PathValue("path") // –æ—Å—Ç–∞—Ç–æ–∫ –ø—É—Ç–∏
    fmt.Fprintf(w, "–§–∞–π–ª: %s", path)
})

http.ListenAndServe(":8080", mux)
```

### –î–ª—è —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π ‚Äî —Ä—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

```go
func userHandler(w http.ResponseWriter, r *http.Request) {
    path := r.URL.Path
    if len(path) <= 8 || path[:8] != "/users/" {
        http.NotFound(w, r)
        return
    }
    
    id := path[8:]
    fmt.Fprintf(w, "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ID: %s", id)
}

http.HandleFunc("/users/", userHandler)
```

## –ß–∏—Ç–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –∑–∞–ø—Ä–æ—Å–∞

### Query-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã (?name=–ê–Ω—è&age=25)

**Query-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã** ‚Äî —ç—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –∫–æ–Ω–µ—Ü URL –ø–æ—Å–ª–µ –∑–Ω–∞–∫–∞ `?`, —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞—Ç—å —Å–µ—Ä–≤–µ—Ä—É –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞. –û–Ω–∏ –≤—ã–≥–ª—è–¥—è—Ç —Ç–∞–∫: `https://example.com/search?q=golang&page=2&limit=20`, –≥–¥–µ `q=golang` ‚Äî –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å, `page=2` ‚Äî –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã, `limit=20` ‚Äî —Å–∫–æ–ª—å–∫–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∫–∞–∑–∞—Ç—å, –∞ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞–∑–¥–µ–ª—è—é—Ç—Å—è —Å–∏–º–≤–æ–ª–æ–º `&`. 

–û–Ω–∏ –Ω—É–∂–Ω—ã –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –¥–ª—è GET-–∑–∞–ø—Ä–æ—Å–æ–≤, –∫–æ–≥–¥–∞ —Ç—ã —Ö–æ—á–µ—à—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å —É—Ç–æ—á–Ω–µ–Ω–∏—è–º–∏ (–ø–æ–∏—Å–∫, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, –ø–∞–≥–∏–Ω–∞—Ü–∏—è, —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ —Ü–µ–Ω–µ –∏–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏) ‚Äî —ç—Ç–æ –¥–µ–ª–∞–µ—Ç URL –ø–æ–Ω—è—Ç–Ω—ã–º —á–µ–ª–æ–≤–µ–∫—É, –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –¥–µ–ª–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–∞–º–∏ —Å –≥–æ—Ç–æ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏, –∞ –±—Ä–∞—É–∑–µ—Ä –∏ —Å–µ—Ä–≤–µ—Ä—ã –º–æ–≥—É—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã. 

> <br /> **Query-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã** ‚Äî —ç—Ç–æ —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± "–¥–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è" —Å —Å–µ—Ä–≤–µ—Ä–æ–º –æ —Ç–æ–º, –∫–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ –¥–∞–Ω–Ω—ã–µ —Ç–µ–±–µ –Ω—É–∂–Ω—ã, –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø—É—Ç–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª—É—á–∞—è.

```go
mux.HandleFunc("GET /users", func(w http.ResponseWriter, r *http.Request) {
	values := r.URL.Query() // map[string][]string
	
	name := values.Get("name") // –ø–µ—Ä–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–ª–∏ ""
	age := values.Get("age")
	category := values["category"] // []string ‚Äî –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è
	
	fmt.Fprintf(w, "–ò–º—è: %s, –í–æ–∑—Ä–∞—Å—Ç: %s, –ö–∞—Ç–µ–≥–æ—Ä–∏–∏: %v", name, age, category)
})
```

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é `curl`:
```bash
curl -X GET http://localhost:8080/users?name=–ê–Ω—è&age=25&category=1,2

# –ò–º—è: –ê–Ω—è, –í–æ–∑—Ä–∞—Å—Ç: 25, –ö–∞—Ç–µ–≥–æ—Ä–∏–∏: [1 2]
```

### –ó–∞–≥–æ–ª–æ–≤–∫–∏ (Headers)

**HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∏ *(Headers)*** ‚Äî —ç—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –≤ –∑–∞–ø—Ä–æ—Å–µ –∏–ª–∏ –æ—Ç–≤–µ—Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç –≤–∞–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–∞–º–æ–º –∑–∞–ø—Ä–æ—Å–µ/–æ—Ç–≤–µ—Ç–µ, –Ω–æ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º (—Ç–µ–ª–æ–º). 

–ü—Ä–µ–¥—Å—Ç–∞–≤—å –ø–∏—Å—å–º–æ: —Ç–µ–ª–æ –ø–∏—Å—å–º–∞ ‚Äî —ç—Ç–æ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è, –∞ –∑–∞–≥–æ–ª–æ–≤–∫–∏ ‚Äî —ç—Ç–æ –∫–æ–Ω–≤–µ—Ä—Ç —Å –¥–∞–Ω–Ω—ã–º–∏: –æ—Ç –∫–æ–≥–æ, –∫–æ–º—É, –¥–∞—Ç–∞, —Ç–∏–ø —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ, —è–∑—ã–∫ –∏ —Ç.–¥. –ù–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Content-Type: application/json` –≥–æ–≤–æ—Ä–∏—Ç ¬´–≤ —Ç–µ–ª–µ JSON¬ª, `Authorization: Bearer token` –ø–µ—Ä–µ–¥–∞—ë—Ç —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, `User-Agent` —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–æ–π –±—Ä–∞—É–∑–µ—Ä –∏–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Å–¥–µ–ª–∞–ª–∞ –∑–∞–ø—Ä–æ—Å, –∞ `Cache-Control` —É–ø—Ä–∞–≤–ª—è–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º. 

–ó–∞–≥–æ–ª–æ–≤–∫–∏ –Ω—É–∂–Ω—ã, —á—Ç–æ–±—ã –∫–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä –º–æ–≥–ª–∏ –¥–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è –æ —Ñ–æ—Ä–º–∞—Ç–µ –¥–∞–Ω–Ω—ã—Ö, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–∏, —è–∑—ã–∫–µ, —Å–∂–∞—Ç–∏–∏ –∏ –º–Ω–æ–≥–æ–º –¥—Ä—É–≥–æ–º ‚Äî –±–µ–∑ –Ω–∏—Ö HTTP —Ä–∞–±–æ—Ç–∞–ª –±—ã –æ—á–µ–Ω—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ, –∏ –º–Ω–æ–≥–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, CORS, –∫—ç—à) –±—ã–ª–∏ –±—ã –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã. 

–ó–∞–≥–æ–ª–æ–≤–∫–∏ ‚Äî —ç—Ç–æ ¬´–º–µ—Ç–∫–∞¬ª –Ω–∞ –ø–æ—Å—ã–ª–∫–µ, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–º–æ–≥–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –µ—ë –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å. 

```go
mux.HandleFunc("GET /users/{id}", func(w http.ResponseWriter, r *http.Request) {
	auth := r.Header.Get("Authorization")
	userAgent := r.Header.Get("User-Agent")
	contentType := r.Header.Get("Content-Type")
	
	fmt.Fprintf(w, "Auth: %s\nUser-Agent: %s\nContent-Type: %s", auth, userAgent, contentType)
})
```

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é `cURL`:
```bash
curl -X GET http://localhost:8080/users/123 -H "Authorization: Bearer token123" -H "User-Agent: MyClient/1.0" -H "Content-Type: application/json"

# Auth: Bearer token123
# User-Agent: MyClient/1.0
# Content-Type: application/json%  
```

### –§–æ—Ä–º—ã (application/x-www-form-urlencoded)

**–§–æ—Ä–º—ã** ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –æ–±—ã—á–Ω–æ —á–µ—Ä–µ–∑ `POST`-–∑–∞–ø—Ä–æ—Å. 

–ü—Ä–µ–¥—Å—Ç–∞–≤—å –æ–±—ã—á–Ω—É—é —Ñ–æ—Ä–º—É –Ω–∞ —Å–∞–π—Ç–µ: –ø–æ–ª—è –¥–ª—è –ª–æ–≥–∏–Ω–∞, –ø–∞—Ä–æ–ª—è, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è –∏–ª–∏ –ø–æ–∏—Å–∫–∞ ‚Äî —Ç—ã –∑–∞–ø–æ–ª–Ω—è–µ—à—å –∏—Ö –∏ –Ω–∞–∂–∏–º–∞–µ—à—å "–û—Ç–ø—Ä–∞–≤–∏—Ç—å". –ë—Ä–∞—É–∑–µ—Ä —Å–æ–±–∏—Ä–∞–µ—Ç –≤—Å–µ –≤–≤–µ–¥—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö —Å–µ—Ä–≤–µ—Ä—É –ª–∏–±–æ –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞ (–∫–∞–∫ –∫–ª—é—á=–∑–Ω–∞—á–µ–Ω–∏–µ), –ª–∏–±–æ –∏–Ω–æ–≥–¥–∞ –≤ URL. –û–Ω–∏ –Ω—É–∂–Ω—ã, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–≥ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å —Å–∞–π—Ç–æ–º: —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è, –≤—Ö–æ–¥–∏—Ç—å –≤ –∞–∫–∫–∞—É–Ω—Ç, –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è, –¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑—ã, –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–∞–π–ª—ã –∏–ª–∏ –∏—Å–∫–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. 

> <br /> –ë–µ–∑ —Ñ–æ—Ä–º –≤–µ–± –±—ã–ª –±—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–∞—Ç–∏—á–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü ‚Äî —Ñ–æ—Ä–º—ã –¥–µ–ª–∞—é—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º –∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–µ—Ä–≤–µ—Ä—É –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. 


```go
func formHandler(w http.ResponseWriter, r *http.Request) {
	if r.Method == http.MethodPost {
		r.ParseForm() // –ø–∞—Ä—Å–∏–º —Ñ–æ—Ä–º—É
		login := r.FormValue("login")
		password := r.FormValue("password")

		fmt.Fprintf(w, "–õ–æ–≥–∏–Ω: %s, –ü–∞—Ä–æ–ª—å: %s", login, password)
	} else {
		// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É
		fmt.Fprint(w, `
            <form method="post">
                –õ–æ–≥–∏–Ω: <input name="username"><br>
                –ü–∞—Ä–æ–ª—å: <input name="password" type="password"><br>
                <button>–í–æ–π—Ç–∏</button>
            </form>
        `)
	}
}

mux.HandleFunc("GET /users", formHandler)
mux.HandleFunc("POST /users", formHandler)

```

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ POST-–º–µ—Ç–æ–¥–∞ —Å –ø–æ–º–æ—â—å—é `cURL` (–ú–µ—Ç–æ–¥ `GET` —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ):
```bash
curl -X POST http://localhost:8080/users -d "login=anya&password=secret"

# –õ–æ–≥–∏–Ω: anya, –ü–∞—Ä–æ–ª—å: secret
```

### JSON –≤ —Ç–µ–ª–µ (POST/PUT)

**JSON** ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ–π –∏ –ª—ë–≥–∫–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ —Ç–µ–∫—Å—Ç –∏ –ª–µ–≥–∫–æ —á–∏—Ç–∞–µ—Ç—Å—è –∫–∞–∫ —á–µ–ª–æ–≤–µ–∫–æ–º, —Ç–∞–∫ –∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º. –û–Ω —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –ø–∞—Ä ¬´–∫–ª—é—á: –∑–Ω–∞—á–µ–Ω–∏–µ¬ª (–∫–∞–∫ —Å–ª–æ–≤–∞—Ä—å), –º–∞—Å—Å–∏–≤–æ–≤ (—Å–ø–∏—Å–∫–æ–≤) –∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä: `{"name": "–ê–Ω—è", "age": 25, "hobbies": ["–∫–Ω–∏–≥–∏", "—Å–ø–æ—Ä—Ç"]}`. 

JSON –Ω—É–∂–µ–Ω, —á—Ç–æ–±—ã —Ä–∞–∑–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã, —Å–µ—Ä–≤–∏—Å—ã –∏ —è–∑—ã–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–≥–ª–∏ –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –¥–∞–Ω–Ω—ã–º–∏: –±—Ä–∞—É–∑–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç JSON –Ω–∞ —Å–µ—Ä–≤–µ—Ä, —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç JSON'–æ–º, –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ JSON, API (–∫–∞–∫ –ø–æ–≥–æ–¥–∞ –∏–ª–∏ –∫–∞—Ä—Ç—ã) –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç JSON. –ë–µ–∑ –Ω–µ–≥–æ –±—ã–ª–æ –±—ã —Å–ª–æ–∂–Ω–æ "–¥–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è" –º–µ–∂–¥—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º, –±—ç–∫–µ–Ω–¥–æ–º –∏ –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ ‚Äî JSON —Å—Ç–∞–ª —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º "—è–∑—ã–∫–æ–º" –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏. 

> <br /> JSON ‚Äî —ç—Ç–æ —É–¥–æ–±–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–π –≤—Å–µ –ø–æ–Ω–∏–º–∞—é—Ç.

```go
type CreateUserRequest struct {
    Name  string `json:"name"`
    Email string `json:"email"`
    Age   int    `json:"age"`
}


func main(){ 
mux.HandleFunc("GET /users", func(w http.ResponseWriter, r *http.Request) {
	var req CreateUserRequest
	err := json.NewDecoder(r.Body).Decode(&req)
	if err != nil {
	    http.Error(w, "–ù–µ–≤–µ—Ä–Ω—ã–π JSON: "+err.Error(), http.StatusBadRequest)
	    return
	}
	
	// –ó–¥–µ—Å—å —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ë–î...
	fmt.Fprintf(w, "–°–æ–∑–¥–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: %s (%d –ª–µ—Ç)", req.Name, req.Age)
})
}
```

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ POST —Å –ø–æ–º–æ—â—å—é `cURL`:
```bash
curl -X POST http://localhost:8080/users \
-H "Content-Type: application/json" \
-d '{"name": "anya", "email": "anya@example.com", "age": 25}'


# –°–æ–∑–¥–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: anya (25 –ª–µ—Ç)
```

## –í–æ–∑–∞—Ä–∞—â–∞–µ–º —Ä–∞–∑–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã

### –¢–µ–∫—Å—Ç –∏ HTML

–ö—Ä–æ–º–µ –ø—Ä–æ—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫ –∏ JSON —Ñ–æ—Ä–º–∞—Ç–∞, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTML (–ß–∞—â–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞–∫–µ—Ç [`html/template`](https://pkg.go.dev/html/template) –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å html)

```go
mux.HandleFunc("GET /users", func(w http.ResponseWriter, r *http.Request) {
	fmt.Fprint(w, "<h1>–ó–∞–≥–æ–ª–æ–≤–æ–∫</h1><p>–¢–µ–∫—Å—Ç</p>")
})
```

### JSON

**JSON** —è–≤–ª—è–µ—Ç—Å—è —Å–∞–º—ã–º —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞

```go
type APIResponse struct {
    Success bool        `json:"success"`
    Data    any         `json:"data,omitempty"`
    Error   string      `json:"error,omitempty"`
}

// –£–¥–æ–±–Ω—ã–π –∫–∞—Å—Ç–æ–º–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ JSON –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
func sendJSON(w http.ResponseWriter, data any, status int) {
    w.Header().Set("Content-Type", "application/json")
    w.WriteHeader(status)
    json.NewEncoder(w).Encode(data)
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
sendJSON(w, APIResponse{Success: true, Data: user}, http.StatusOK)
sendJSON(w, APIResponse{Success: false, Error: "–ù–µ –Ω–∞–π–¥–µ–Ω–æ"}, http.StatusNotFound)
```

### –ó–∞–≥–æ–ª–æ–≤–∫–∏ –∏ —Å—Ç–∞—Ç—É—Å—ã

```go
w.Header().Set("Content-Type", "text/plain")
w.Header().Set("X-Custom-Header", "my-value")
w.WriteHeader(http.StatusCreated) // 201
fmt.Fprint(w, "–°–æ–∑–¥–∞–Ω–æ")
```

### –†–µ–¥–∏—Ä–µ–∫—Ç—ã

**–†–µ–¥–∏—Ä–µ–∫—Ç** ‚Äî —ç—Ç–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –¥—Ä—É–≥–æ–π URL.

```go
http.Redirect(w, r, "/login", http.StatusFound) // 302
http.Redirect(w, r, "/dashboard", http.StatusPermanentRedirect) // 308
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–æ–≤ –∏ —Å—Ç–∞—Ç–∏–∫–∏

```go
// –û–¥–∏–Ω —Ñ–∞–π–ª
http.ServeFile(w, r, "static/resume.pdf")

// –ü–∞–ø–∫–∞ —Å–æ —Å—Ç–∞—Ç–∏—á–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
fileServer := http.FileServer(http.Dir("static"))
http.Handle("/static/", http.StripPrefix("/static/", fileServer))
```

> <br /> –°—Ç–∞—Ç–∏—á–Ω—ã–µ —Ñ–∞–π–ª—ã ‚Äî —ç—Ç–æ —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∏–∑–º–µ–Ω—è—é—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –û–Ω–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ –¥–∏—Å–∫–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ.

## Middleware ‚Äî —Å–∫–≤–æ–∑–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –≤—Å–µ—Ö —Ö–µ–Ω–¥–ª–µ—Ä–æ–≤

**Middleware** ‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏-–æ–±—ë—Ä—Ç–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ "–æ–±–æ—Ä–∞—á–∏–≤–∞—é—Ç" —Ç–≤–æ–π –æ—Å–Ω–æ–≤–Ω–æ–π —Ö–µ–Ω–¥–ª–µ—Ä (–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–ø—Ä–æ—Å–∞) –∏ –¥–æ–±–∞–≤–ª—è—é—Ç –∫ –Ω–µ–º—É –ø–æ–ª–µ–∑–Ω—É—é –ª–æ–≥–∏–∫—É, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–ª–∂–Ω–∞ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –¥–ª—è –º–Ω–æ–≥–∏—Ö –∏–ª–∏ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤. 

–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —É —Ç–µ–±—è –µ—Å—Ç—å –¥–≤–µ—Ä—å –≤ –∫–æ–º–Ω–∞—Ç—É (—Ö–µ–Ω–¥–ª–µ—Ä), –∞ middleware ‚Äî —ç—Ç–æ –æ—Ö—Ä–∞–Ω–Ω–∏–∫–∏ –∏–ª–∏ –ø–æ–º–æ—â–Ω–∏–∫–∏ –ø–µ—Ä–µ–¥ –¥–≤–µ—Ä—å—é: –æ–¥–∏–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–æ–ø—É—Å–∫ (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è), –¥—Ä—É–≥–æ–π –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç, –∫—Ç–æ –ø—Ä–∏—à—ë–ª (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ), —Ç—Ä–µ—Ç–∏–π –Ω–∞–¥–µ–≤–∞–µ—Ç –Ω–∞ –≥–æ—Å—Ç—è —Ç–∞–ø–æ—á–∫–∏ (–¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏ CORS), —á–µ—Ç–≤—ë—Ä—Ç—ã–π –∏–∑–º–µ—Ä—è–µ—Ç –≤—Ä–µ–º—è –ø–æ—Å–µ—â–µ–Ω–∏—è (–º–µ—Ç—Ä–∏–∫–∏). –ö–∞–∂–¥—ã–π middleware –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å, –º–æ–∂–µ—Ç —á—Ç–æ-—Ç–æ —Å –Ω–∏–º —Å–¥–µ–ª–∞—Ç—å, –ø–µ—Ä–µ–¥–∞—Ç—å –¥–∞–ª—å—à–µ —Å–ª–µ–¥—É—é—â–µ–º—É middleware –∏–ª–∏ —Ö–µ–Ω–¥–ª–µ—Ä—É, –∞ –ø–æ—Ç–æ–º –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—Ç–≤–µ—Ç. –û–Ω–∏ –Ω—É–∂–Ω—ã, —á—Ç–æ–±—ã –Ω–µ –ø–∏—Å–∞—Ç—å –æ–¥–Ω—É –∏ —Ç—É –∂–µ –ø–æ–≤—Ç–æ—Ä—è—é—â—É—é—Å—è –ª–æ–≥–∏–∫—É (–ª–æ–≥–∏, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, —Å–∂–∞—Ç–∏–µ, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–∞–Ω–∏–∫–∏) –≤ –∫–∞–∂–¥–æ–º —Ö–µ–Ω–¥–ª–µ—Ä–µ –æ—Ç–¥–µ–ª—å–Ω–æ ‚Äî –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ø–∏—à–µ—à—å –µ—ë –æ–¥–∏–Ω —Ä–∞–∑ –≤ middleware –∏ "–Ω–∞–¥–µ–≤–∞–µ—à—å" –Ω–∞ –Ω—É–∂–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –∏–ª–∏ –≤–µ—Å—å —Å–µ—Ä–≤–µ—Ä. 

> <br /> **Middleware** ‚Äî —ç—Ç–æ —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–¥–µ–ª–∞—Ç—å –∫–æ–¥ —á–∏—â–µ, –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º –∏ –¥–æ–±–∞–≤–∏—Ç—å —Å–∫–≤–æ–∑–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫–æ –≤—Å–µ–º –∑–∞–ø—Ä–æ—Å–∞–º. üòä

```go
// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
func loggingMiddleware(next http.Handler) http.Handler {
    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        start := time.Now()
        next.ServeHTTP(w, r)
        duration := time.Since(start)
        log.Printf("%s %s %v", r.Method, r.URL.Path, duration)
    })
}

// –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ —Ç–æ–∫–µ–Ω—É
func authMiddleware(next http.Handler) http.Handler {
    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        token := r.Header.Get("Authorization")
        if token != "Bearer secret-token" {
            http.Error(w, "–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω", http.StatusUnauthorized)
            return
        }
        next.ServeHTTP(w, r)
    })
}
```

**–¶–µ–ø–æ—á–∫–∞ middleware**

```go
mux := http.NewServeMux()
// ... —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º —Ö–µ–Ω–¥–ª–µ—Ä—ã

handler := loggingMiddleware(authMiddleware(mux))

http.ListenAndServe(":8080", handler)
```

### CORS

**CORS *(Cross-Origin Resource Sharing)*** ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–∞—Ö, –∫–æ—Ç–æ—Ä—ã–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∑–∞–ø—Ä–µ—â–∞–µ—Ç –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–∞–π—Ç—É –Ω–∞ –¥–æ–º–µ–Ω–µ example.com) –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ –¥—Ä—É–≥–æ–º—É –¥–æ–º–µ–Ω—É (api.other.com), —á—Ç–æ–±—ã –∑–∞—â–∏—Ç–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ—Ç –∑–ª–æ–Ω–∞–º–µ—Ä–µ–Ω–Ω—ã—Ö —Å–∞–π—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥–ª–∏ –±—ã –∫—Ä–∞—Å—Ç—å –¥–∞–Ω–Ω—ã–µ. 

–ë–µ–∑ CORS –±—Ä–∞—É–∑–µ—Ä –ø—Ä–æ—Å—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ç–∞–∫–æ–π –∑–∞–ø—Ä–æ—Å –∏ –≤—ã–¥–∞—ë—Ç –æ—à–∏–±–∫—É. –°–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç —Ä–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø, –æ—Ç–ø—Ä–∞–≤–ª—è—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –≤ –æ—Ç–≤–µ—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Access-Control-Allow-Origin: https://example.com` –∏–ª–∏ `*` –¥–ª—è –≤—Å–µ—Ö), —É–∫–∞–∑—ã–≤–∞—è, –∫–∞–∫–∏–µ –¥–æ–º–µ–Ω—ã, –º–µ—Ç–æ–¥—ã (GET, POST) –∏ –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã. CORS –Ω—É–∂–µ–Ω, —á—Ç–æ–±—ã —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–µ–± —Ä–∞–±–æ—Ç–∞–ª: —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ –æ–¥–Ω–æ–º –¥–æ–º–µ–Ω–µ –º–æ–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ–±—â–∞—Ç—å—Å—è —Å API –Ω–∞ –¥—Ä—É–≥–æ–º, –Ω–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä —è–≤–Ω–æ —ç—Ç–æ —Ä–∞–∑—Ä–µ—à–∏—Ç. 

> <br /> CORS ‚Äî —ç—Ç–æ "–ø—Ä–æ–ø—É—Å–∫" –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –±—Ä–∞—É–∑–µ—Ä—É: "–î–∞, —ç—Ç–æ–º—É —Å–∞–π—Ç—É –º–æ–∂–Ω–æ –∫–æ –º–Ω–µ –æ–±—Ä–∞—â–∞—Ç—å—Å—è". 

```go
// CORS
func corsMiddleware(next http.Handler) http.Handler {
    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        w.Header().Set("Access-Control-Allow-Origin", "*")
        w.Header().Set("Access-Control-Allow-Methods", "GET, POST, PUT, DELETE")
        w.Header().Set("Access-Control-Allow-Headers", "Content-Type, Authorization")

        if r.Method == http.MethodOptions {
            w.WriteHeader(http.StatusOK)
            return
        }

        next.ServeHTTP(w, r)
    })
}
````

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CORS –≤ middleware**

```go
mux := http.NewServeMux()
// ... —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º —Ö–µ–Ω–¥–ª–µ—Ä—ã

handler := corsMiddleware(mux)

// –õ–∏–±–æ –∂–µ —Ü–µ–ø–æ—á–∫–∞ middleware
handler := loggingMiddleware(authMiddleware(handler))

http.ListenAndServe(":8080", handler)
```

## –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π REST API ‚Äî —Å–æ–±–∏—Ä–∞–µ–º –≤—Å—ë –≤–º–µ—Å—Ç–µ

```go
package main

import (
    "encoding/json"
    "log"
    "net/http"
    "strconv"
    "sync"
    "time"
)

// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
type User struct {
    ID    int    `json:"id"`
    Name  string `json:"name"`
    Email string `json:"email"`
    Age   int    `json:"age"`
}

// –û–±—ä—è–≤–ª—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
var (
    users  = make(map[int]User)
    nextID = 1
    mu     sync.RWMutex
)

func main() {
    mux := http.NewServeMux()

    // API –º–∞—Ä—à—Ä—É—Ç—ã
    mux.HandleFunc("GET /api/users", listUsers)
    mux.HandleFunc("POST /api/users", createUser)
    mux.HandleFunc("GET /api/users/{id}", getUser)
    mux.HandleFunc("PUT /api/users/{id}", updateUser)
    mux.HandleFunc("DELETE /api/users/{id}", deleteUser)

    // –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–∞–ø–∫–∞
    mux.Handle("/static/", http.StripPrefix("/static/", http.FileServer(http.Dir("static"))))

    // Middleware —Ü–µ–ø–æ—á–∫–∞
    handler := corsMiddleware(loggingMiddleware(mux))

    log.Println("API —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ :8080")
    log.Fatal(http.ListenAndServe(":8080", handler))
}

// loggingMiddleware –ª–æ–≥–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã
func loggingMiddleware(next http.Handler) http.Handler {
    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        start := time.Now()
        log.Printf("‚Üí %s %s", r.Method, r.URL.Path)
        next.ServeHTTP(w, r)
        log.Printf("‚Üê %s %s %v", r.Method, r.URL.Path, time.Since(start))
    })
}

// corsMiddleware –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç CORS
func corsMiddleware(next http.Handler) http.Handler {
    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        w.Header().Set("Access-Control-Allow-Origin", "*")
        w.Header().Set("Access-Control-Allow-Methods", "GET, POST, PUT, DELETE, OPTIONS")
        w.Header().Set("Access-Control-Allow-Headers", "Content-Type, Authorization")

        if r.Method == "OPTIONS" {
            w.WriteHeader(http.StatusOK)
            return
        }
        next.ServeHTTP(w, r)
    })
}

// === –•–µ–Ω–¥–ª–µ—Ä—ã ===

// listUsers –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
func listUsers(w http.ResponseWriter, r *http.Request) {
		// –ò—Å–ø–æ–ª—å–∑—É–µ–º –º—å—é—Ç–µ–∫—Å –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º –∏ —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –≥–æ–Ω–æ–∫ –¥–∞–Ω–Ω—ã—Ö
    mu.RLock()
    defer mu.RUnlock()

    list := make([]User, 0, len(users))
    for _, u := range users {
        list = append(list, u)
    }

    sendJSON(w, map[string]any{"users": list}, http.StatusOK)
}

// createUser —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
func createUser(w http.ResponseWriter, r *http.Request) {
    var u User
    if err := json.NewDecoder(r.Body).Decode(&u); err != nil {
        sendJSON(w, map[string]string{"error": "–ù–µ–≤–µ—Ä–Ω—ã–π JSON"}, http.StatusBadRequest)
        return
    }

    mu.Lock()
    u.ID = nextID
    nextID++
    users[u.ID] = u
    mu.Unlock()

    sendJSON(w, u, http.StatusCreated)
}

// getUser –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID
func getUser(w http.ResponseWriter, r *http.Request) {
    idStr := r.PathValue("id")
    id, err := strconv.Atoi(idStr)
    if err != nil {
        sendJSON(w, map[string]string{"error": "–ù–µ–≤–µ—Ä–Ω—ã–π ID"}, http.StatusBadRequest)
        return
    }

    mu.RLock()
    user, exists := users[id]
    mu.RUnlock()

    if !exists {
        sendJSON(w, map[string]string{"error": "–ù–µ –Ω–∞–π–¥–µ–Ω–æ"}, http.StatusNotFound)
        return
    }

    sendJSON(w, user, http.StatusOK)
}

// updateUser –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID
func updateUser(w http.ResponseWriter, r *http.Request) {
    idStr := r.PathValue("id")
    id, err := strconv.Atoi(idStr)
    if err != nil {
        sendJSON(w, map[string]string{"error": "–ù–µ–≤–µ—Ä–Ω—ã–π ID"}, http.StatusBadRequest)
        return
    }

    var u User
    if err := json.NewDecoder(r.Body).Decode(&u); err != nil {
        sendJSON(w, map[string]string{"error": "–ù–µ–≤–µ—Ä–Ω—ã–π JSON"}, http.StatusBadRequest)
        return
    }

    mu.Lock()
    if _, exists := users[id]; !exists {
    		// –Ø–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞ Unlock –º—å—é—Ç–µ–∫—Å–∞, —Ç.–∫. –ø—Ä–∏ defer Unlock –≤ –¥–∞–Ω–Ω–æ–º –º–æ–∂–µ—Ç –Ω–µ –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω [–ü–æ—è—Å–Ω–µ–Ω–∏–µ –Ω–∏–∂–µ]
        mu.Unlock()
        sendJSON(w, map[string]string{"error": "–ù–µ –Ω–∞–π–¥–µ–Ω–æ"}, http.StatusNotFound)
        return
    }
    u.ID = id
    users[id] = u
    mu.Unlock()

    sendJSON(w, u, http.StatusOK)
}

// deleteUser —É–¥–∞–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID
func deleteUser(w http.ResponseWriter, r *http.Request) {
    idStr := r.PathValue("id")
    id, err := strconv.Atoi(idStr)
    if err != nil {
        sendJSON(w, map[string]string{"error": "–ù–µ–≤–µ—Ä–Ω—ã–π ID"}, http.StatusBadRequest)
        return
    }

    mu.Lock()
    if _, exists := users[id]; !exists {
        mu.Unlock()
        sendJSON(w, map[string]string{"error": "–ù–µ –Ω–∞–π–¥–µ–Ω–æ"}, http.StatusNotFound)
        return
    }
    delete(users, id)
    mu.Unlock()

    sendJSON(w, map[string]string{"message": "–£–¥–∞–ª–µ–Ω–æ"}, http.StatusOK)
}

// sendJSON —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ JSON –æ—Ç–≤–µ—Ç–∞
func sendJSON(w http.ResponseWriter, data any, status int) {
    w.Header().Set("Content-Type", "application/json")
    w.WriteHeader(status)
    json.NewEncoder(w).Encode(data)
}
```

## Graceful shutdown ‚Äî –∫—Ä–∞—Å–∏–≤–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞

Graceful shutdown ‚Äî —ç—Ç–æ –∫—Ä–∞—Å–∏–≤–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–µ—Ä–≤–µ—Ä—É –∑–∞–≤–µ—Ä—à–∏—Ç—å –≤—Å–µ —Ç–µ–∫—É—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–∫–ª—é—á–∏—Ç—å—Å—è –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö.

```go
package main

import (
    "context"
    "log"
    "net/http"
    "os"
    "os/signal"
    "syscall"
    "time"
)

func runServer() {
    srv := &http.Server{
        Addr:    ":8080",
        Handler: handler, // —Ç–≤–æ–π mux —Å middleware
    }

    // –ó–∞–ø—É—Å–∫ –≤ –≥–æ—Ä—É—Ç–∏–Ω–µ
    go func() {
        log.Println("–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ :8080")
        if err := srv.ListenAndServe(); err != nil && err != http.ErrServerClosed {
            log.Fatalf("–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: %v", err)
        }
    }()

    // –õ–æ–≤–∏–º —Å–∏–≥–Ω–∞–ª—ã –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
    stop := make(chan os.Signal, 1)
    signal.Notify(stop, os.Interrupt, syscall.SIGTERM)

    <-stop
    log.Println("–ü–æ–ª—É—á–µ–Ω —Å–∏–≥–Ω–∞–ª –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è...")

    // –¢–∞–π–º–∞—É—Ç –Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
    ctx, cancel := context.WithTimeout(context.Background(), 30*time.Second)
    defer cancel()

    if err := srv.Shutdown(ctx); err != nil {
        log.Printf("–û—à–∏–±–∫–∞ –ø—Ä–∏ shutdown: %v", err)
    } else {
        log.Println("–°–µ—Ä–≤–µ—Ä gracefully –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
    }
}
```

### –ü–æ—á–µ–º—É –º—ã —è–≤–Ω–æ –≤—ã–∑—ã–≤–∞–µ–º mu.Unlock(), –∞ –Ω–µ defer?

–ü—Ä–∏ `return` –≤ –≤–µ—Ç–∫–µ `if` —Ñ—É–Ω–∫—Ü–∏—è **–∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É**, –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ –Ω–µ—ë. –ù–æ –≤–æ—Ç –≤ —á—ë–º –Ω—é–∞–Ω—Å —Å `defer`:

`defer` **–Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å—Ä–∞–∑—É** –ø—Ä–∏ `return` ‚Äî –æ–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –≤ –º–æ–º–µ–Ω—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—ã—Ö–æ–¥–∞ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏**, —Ç–æ –µ—Å—Ç—å –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—Å–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–æ `return` –≤—ã–ø–æ–ª–Ω—è—Ç—Å—è, –Ω–æ **–ø–µ—Ä–µ–¥** —Ç–µ–º, –∫–∞–∫ —Å—Ç–µ–∫ —Ñ—Ä–µ–π–º —Ñ—É–Ω–∫—Ü–∏–∏ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—Å—è.

–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ:

```go
mu.Lock()
defer mu.Unlock()  // ‚Üê –≠—Ç–æ –ø–æ—Å—Ç–∞–≤–∏—Ç Unlock –≤ –æ—á–µ—Ä–µ–¥—å –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ

if _, exists := users[id]; !exists {
    sendJSON(...)     // ‚Üê –í—ã–ø–æ–ª–Ω–∏—Ç—Å—è
    return            // ‚Üê –§—É–Ω–∫—Ü–∏—è "—Ö–æ—á–µ—Ç" –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è
}
// ‚Üê –ù–æ defer mu.Unlock() —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –¢–û–õ–¨–ö–û –ó–î–ï–°–¨, –ø–æ—Å–ª–µ return!
```

–¢–æ –µ—Å—Ç—å:
1. –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è `sendJSON(...)`
2. –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è `return` ‚Äî —Ñ—É–Ω–∫—Ü–∏—è –Ω–∞—á–∏–Ω–∞–µ—Ç –∑–∞–≤–µ—Ä—à–∞—Ç—å—Å—è
3. **–¢–æ–ª—å–∫–æ –ø–æ—Ç–æ–º** —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `defer mu.Unlock()`
4. –ú—å—é—Ç–µ–∫—Å —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è

–í –∏—Ç–æ–≥–µ –º—å—é—Ç–µ–∫—Å –æ—Å—Ç–∞—ë—Ç—Å—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –Ω–∞ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `sendJSON` –∏ –≤—Å–µ–≥–æ, —á—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å `return`. –≠—Ç–æ –ø–ª–æ—Ö–æ: –¥—Ä—É–≥–∏–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –∂–¥—É—Ç —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏, –∞ —Ç—ã –¥–µ—Ä–∂–∏—à—å –º—å—é—Ç–µ–∫—Å –¥–æ–ª—å—à–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ.

–í–∞—Ä–∏–∞–Ω—Ç —Å —è–≤–Ω—ã–º `mu.Unlock()` –ø–µ—Ä–µ–¥ `return` ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π, –ø–æ—Ç–æ–º—É —á—Ç–æ:
- –¢—ã —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –º—å—é—Ç–µ–∫—Å **—Å—Ä–∞–∑—É**, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –æ–Ω –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω.
- –ú—å—é—Ç–µ–∫—Å –¥–µ—Ä–∂–∏—Ç—Å—è —Ä–æ–≤–Ω–æ —Å—Ç–æ–ª—å–∫–æ, —Å–∫–æ–ª—å–∫–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –∑–∞–ø–∏—Å–∏.
- –ù–µ—Ç –ª–∏—à–Ω–µ–π –∑–∞–¥–µ—Ä–∂–∫–∏.

> <br /> `return` –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é, –Ω–æ `defer` —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç **–≤ —Å–∞–º—É—é –ø–æ—Å–ª–µ–¥–Ω—é—é –æ—á–µ—Ä–µ–¥—å**. –ü–æ—ç—Ç–æ–º—É –ø—Ä–∏ —Ä–∞–Ω–Ω–∏—Ö `return` –≤–Ω—É—Ç—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π —Å–µ–∫—Ü–∏–∏ (–≥–¥–µ –µ—Å—Ç—å `Lock`) ‚Äî **–Ω–µ–ª—å–∑—è** –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ `defer Unlock()`. –ù—É–∂–Ω–æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é –ø–µ—Ä–µ–¥ `return`.

–¢
## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ 2026 –≥–æ–¥–∞

1. **–ò—Å–ø–æ–ª—å–∑—É–π `http.NewServeMux`** —Å –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏ (Go 1.22+).
2. **–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π –º–µ—Ç–æ–¥** –∏ –≤–æ–∑–≤—Ä–∞—â–∞–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã.
3. **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π –æ—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞** (JSON, —Ñ–æ—Ä–º—ã).
4. **–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π Content-Type**.
5. **Middleware** ‚Äî –¥–ª—è –ª–æ–≥–æ–≤, CORS, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –ø–∞–Ω–∏–∫-—Ä–µ–∫–∞–≤–µ—Ä–∏.
6. **Graceful shutdown** ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.
7. **Context** ‚Äî –¥–ª—è –æ—Ç–º–µ–Ω—ã –¥–æ–ª–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–ë–î, –≤–Ω–µ—à–Ω–∏–µ API).
8. **–õ–∏–º–∏—Ç—ã –Ω–∞ —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞** ‚Äî `r.Body = http.MaxBytesReader(w, r.Body, 10<<20)` (10 MB).
9. **HTTPS** ‚Äî –≤ –ø—Ä–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É–π TLS: `srv.ListenAndServeTLS(cert, key)`.
