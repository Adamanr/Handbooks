---
sidebar_position: 15
description: "–í —ç—Ç–æ–º —É—Ä–æ–∫–µ –º—ã –∏–∑—É—á–∏–º –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –∏ –º–µ—Ç–æ–¥–∞–º–∏, –∞ —Ç–∞–∫–∂–µ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ testing –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è —é–Ω–∏—Ç-—Ç–µ—Å—Ç–æ–≤."
---

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## –í–≤–µ–¥–µ–Ω–∏–µ –≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

Go –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ –ø–∞–∫–µ—Ç `testing`. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Å—Ç—ã–º –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º.

## –û—Å–Ω–æ–≤—ã Unit-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ß—Ç–æ —Ç–∞–∫–æ–µ —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã?

**–Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã** (unit tests) ‚Äî —ç—Ç–æ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã**, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç **–æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–∞–ª–µ–Ω—å–∫–∏–µ —á–∞—Å—Ç–∏ –∫–æ–¥–∞** (–æ–±—ã—á–Ω–æ –æ–¥–Ω—É —Ñ—É–Ω–∫—Ü–∏—é –∏–ª–∏ –º–µ—Ç–æ–¥) –≤ –∏–∑–æ–ª—è—Ü–∏–∏ –æ—Ç –æ—Å—Ç–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã.

#### –ì–ª–∞–≤–Ω–∞—è –∏–¥–µ—è
- **–Æ–Ω–∏—Ç** = –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å (—Ñ—É–Ω–∫—Ü–∏—è, –º–µ—Ç–æ–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã).
- –¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç: –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–¥–∞—ë—Ç **–æ–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç** –∏ –≤–µ–¥—ë—Ç —Å–µ–±—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ.
- –í—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, —Å–µ—Ç—å, —Ñ–∞–π–ª—ã) –ø–æ–¥–º–µ–Ω—è–µ—Ç—Å—è **–º–æ–∫–∞–º–∏** –∏–ª–∏ —Ñ–∏–∫—Ç–∏–≤–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏, —á—Ç–æ–±—ã —Ç–µ—Å—Ç –±—ã–ª –±—ã—Å—Ç—Ä—ã–º –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º.


### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞

–¢–µ—Å—Ç—ã –≤ Go —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è –≤ —Ñ–∞–π–ª–∞—Ö —Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º `_test.go`:

```go
// –§–∞–π–ª: math.go
package math

// Add —Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç –¥–≤–∞ —á–∏—Å–ª–∞
func Add(a, b int) int {
    return a + b
}

// Subtract –≤—ã—á–∏—Ç–∞–µ—Ç –≤—Ç–æ—Ä–æ–µ —á–∏—Å–ª–æ –∏–∑ –ø–µ—Ä–≤–æ–≥–æ
func Subtract(a, b int) int {
    return a - b
}

// Multiply —É–º–Ω–æ–∂–∞–µ—Ç –¥–≤–∞ —á–∏—Å–ª–∞
func Multiply(a, b int) int {
    return a * b
}

// Divide –¥–µ–ª–∏—Ç –ø–µ—Ä–≤–æ–µ —á–∏—Å–ª–æ –Ω–∞ –≤—Ç–æ—Ä–æ–µ
func Divide(a, b float64) (float64, error) {
    if b == 0 {
        return 0, errors.New("–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å")
    }
    return a / b, nil
}
```

```go
// –§–∞–π–ª: math_test.go
package math

import (
    "testing"
)

// –¢–µ—Å—Ç–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å Test
func TestAdd(t *testing.T) {
    result := Add(2, 3)
    expected := 5
    
    if result != expected {
        t.Errorf("Add(2, 3) = %d; –æ–∂–∏–¥–∞–µ—Ç—Å—è %d", result, expected)
    }
}

func TestSubtract(t *testing.T) {
    result := Subtract(5, 3)
    expected := 2
    
    if result != expected {
        t.Errorf("Subtract(5, 3) = %d; –æ–∂–∏–¥–∞–µ—Ç—Å—è %d", result, expected)
    }
}

func TestMultiply(t *testing.T) {
    result := Multiply(3, 4)
    expected := 12
    
    if result != expected {
        t.Errorf("Multiply(3, 4) = %d; –æ–∂–∏–¥–∞–µ—Ç—Å—è %d", result, expected)
    }
}

func TestDivide(t *testing.T) {
    result, err := Divide(10, 2)
    if err != nil {
        t.Errorf("–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: %v", err)
    }
    
    expected := 5.0
    if result != expected {
        t.Errorf("Divide(10, 2) = %f; –æ–∂–∏–¥–∞–µ—Ç—Å—è %f", result, expected)
    }
}

func TestDivideByZero(t *testing.T) {
    _, err := Divide(10, 0)
    if err == nil {
        t.Error("–û–∂–∏–¥–∞–ª–∞—Å—å –æ—à–∏–±–∫–∞ –ø—Ä–∏ –¥–µ–ª–µ–Ω–∏–∏ –Ω–∞ –Ω–æ–ª—å")
    }
}
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã –≤ —Ç–µ–∫—É—â–µ–º –ø–∞–∫–µ—Ç–µ
go test

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
go test -v

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
go test -run TestAdd

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –≤–æ –≤—Å–µ—Ö –ø–æ–¥–ø–∞–∫–µ—Ç–∞—Ö
go test ./...

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
go test -cover

# –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç –æ –ø–æ–∫—Ä—ã—Ç–∏–∏
go test -coverprofile=coverage.out
go tool cover -html=coverage.out
```

## Table-Driven Tests (—Ç–∞–±–ª–∏—á–Ω—ã–µ —Ç–µ—Å—Ç—ã)

–¢–∞–±–ª–∏—á–Ω—ã–µ —Ç–µ—Å—Ç—ã - —ç—Ç–æ –∏–¥–∏–æ–º–∞—Ç–∏—á–Ω—ã–π —Å–ø–æ—Å–æ–± –≤ Go –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤:

```go
// –§–∞–π–ª: string_utils_test.go
package stringutils

import (
    "testing"
)

func TestReverse(t *testing.T) {
    tests := []struct {
        name     string
        input    string
        expected string
    }{
        {
            name:     "–æ–±—ã—á–Ω–∞—è —Å—Ç—Ä–æ–∫–∞",
            input:    "hello",
            expected: "olleh",
        },
        {
            name:     "–ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞",
            input:    "",
            expected: "",
        },
        {
            name:     "—Å—Ç—Ä–æ–∫–∞ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏",
            input:    "hello world",
            expected: "dlrow olleh",
        },
        {
            name:     "—Å—Ç—Ä–æ–∫–∞ —Å Unicode",
            input:    "–ø—Ä–∏–≤–µ—Ç",
            expected: "—Ç–µ–≤–∏—Ä–ø",
        },
        {
            name:     "–æ–¥–∏–Ω–æ—á–Ω—ã–π —Å–∏–º–≤–æ–ª",
            input:    "a",
            expected: "a",
        },
    }
    
    for _, tt := range tests {
        t.Run(tt.name, func(t *testing.T) {
            result := Reverse(tt.input)
            if result != tt.expected {
                t.Errorf("Reverse(%q) = %q; –æ–∂–∏–¥–∞–µ—Ç—Å—è %q", 
                    tt.input, result, tt.expected)
            }
        })
    }
}

func TestIsPalindrome(t *testing.T) {
    tests := []struct {
        name     string
        input    string
        expected bool
    }{
        {"–ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞", "", true},
        {"–æ–¥–Ω–∞ –±—É–∫–≤–∞", "a", true},
        {"–ø–∞–ª–∏–Ω–¥—Ä–æ–º", "racecar", true},
        {"–Ω–µ –ø–∞–ª–∏–Ω–¥—Ä–æ–º", "hello", false},
        {"–ø–∞–ª–∏–Ω–¥—Ä–æ–º —Å –ø—Ä–æ–±–µ–ª–∞–º–∏", "–ê —Ä–æ–∑–∞ —É–ø–∞–ª–∞ –Ω–∞ –ª–∞–ø—É –ê–∑–æ—Ä–∞", true},
        {"–ø–∞–ª–∏–Ω–¥—Ä–æ–º —á–∏—Å–ª–∞", "12321", true},
    }
    
    for _, tt := range tests {
        t.Run(tt.name, func(t *testing.T) {
            result := IsPalindrome(tt.input)
            if result != tt.expected {
                t.Errorf("IsPalindrome(%q) = %v; –æ–∂–∏–¥–∞–µ—Ç—Å—è %v",
                    tt.input, result, tt.expected)
            }
        })
    }
}
```

## –ü–æ–¥—Ç–µ—Å—Ç—ã (Subtests)

–ü–æ–¥—Ç–µ—Å—Ç—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:

```go
func TestValidateUser(t *testing.T) {
    t.Run("–≤–∞–ª–∏–¥–∞—Ü–∏—è username", func(t *testing.T) {
        tests := []struct {
            name      string
            username  string
            shouldErr bool
        }{
            {"–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π username", "john_doe", false},
            {"—Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π", "ab", true},
            {"—Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π", strings.Repeat("a", 51), true},
            {"–ø—É—Å—Ç–æ–π", "", true},
            {"—Å –ø—Ä–æ–±–µ–ª–∞–º–∏", "john doe", true},
        }
        
        for _, tt := range tests {
            t.Run(tt.name, func(t *testing.T) {
                err := ValidateUsername(tt.username)
                if (err != nil) != tt.shouldErr {
                    t.Errorf("ValidateUsername(%q) error = %v; shouldErr = %v",
                        tt.username, err, tt.shouldErr)
                }
            })
        }
    })
    
    t.Run("–≤–∞–ª–∏–¥–∞—Ü–∏—è email", func(t *testing.T) {
        tests := []struct {
            name      string
            email     string
            shouldErr bool
        }{
            {"–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email", "test@example.com", false},
            {"–±–µ–∑ @", "testexample.com", true},
            {"–±–µ–∑ –¥–æ–º–µ–Ω–∞", "test@", true},
            {"–ø—É—Å—Ç–æ–π", "", true},
        }
        
        for _, tt := range tests {
            t.Run(tt.name, func(t *testing.T) {
                err := ValidateEmail(tt.email)
                if (err != nil) != tt.shouldErr {
                    t.Errorf("ValidateEmail(%q) error = %v; shouldErr = %v",
                        tt.email, err, tt.shouldErr)
                }
            })
        }
    })
}

// –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–¥—Ç–µ—Å—Ç–∞
// go test -run TestValidateUser/–≤–∞–ª–∏–¥–∞—Ü–∏—è_username
```

## –•–µ–ª–ø–µ—Ä—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤

### –ß—Ç–æ —Ç–∞–∫–æ–µ —Ö–µ–ª–ø–µ—Ä—ã –≤ —Ç–µ—Å—Ç–∞—Ö Go –∏ –∑–∞—á–µ–º –æ–Ω–∏ –Ω—É–∂–Ω—ã? 

**–•–µ–ª–ø–µ—Ä—ã (test helpers)** ‚Äî —ç—Ç–æ **–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –ø–∏—à–µ—à—å —Å–∞–º, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å —Ç–µ—Å—Ç—ã **–∫–æ—Ä–æ—á–µ, —á–∏—â–µ –∏ —É–¥–æ–±–Ω–µ–µ –¥–ª—è —á—Ç–µ–Ω–∏—è**. –û–Ω–∏ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –ª–æ–≥–∏–∫—É —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–≥–æ –∫–æ–¥–∞, –∞ —Ç–æ–ª—å–∫–æ –ø–æ–º–æ–≥–∞—é—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.

#### –ó–∞—á–µ–º –Ω—É–∂–Ω—ã —Ö–µ–ª–ø–µ—Ä—ã?
1. **–£–º–µ–Ω—å—à–∞—é—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –≤ —Ç–µ—Å—Ç–∞—Ö**  
   –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –≤ –∫–∞–∂–¥–æ–º —Ç–µ—Å—Ç–µ –ø–∏—Å–∞—Ç—å –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ:
   ```go
   if got != want {
       t.Errorf("got %v; want %v", got, want)
   }
   ```
   —Ç—ã –≤—ã–Ω–æ—Å–∏—à—å —ç—Ç–æ –≤ —Ñ—É–Ω–∫—Ü–∏—é `assertEqual` –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –µ—ë –≤–µ–∑–¥–µ.

2. **–î–µ–ª–∞—é—Ç —Ç–µ—Å—Ç—ã —á–∏—Ç–∞–µ–º—ã–º–∏**  
   –°—Ä–∞–≤–Ω–∏:
   ```go
   // –ë–µ–∑ —Ö–µ–ª–ø–µ—Ä–∞ ‚Äî –≥—Ä–æ–º–æ–∑–¥–∫–æ
   if user == nil {
       t.Error("expected non-nil user")
   }
   if user.Username != "john" {
       t.Errorf("got %q, want %q", user.Username, "john")
   }

   // –° —Ö–µ–ª–ø–µ—Ä–æ–º ‚Äî –∫—Ä–∞—Å–∏–≤–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ
   assertNotNil(t, user)
   assertEqual(t, user.Username, "john")
   ```
   –í—Ç–æ—Ä–æ–π –≤–∞—Ä–∏–∞–Ω—Ç —Å—Ä–∞–∑—É –≤–∏–¥–Ω–æ, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è.

3. **t.Helper() ‚Äî –≤–∞–∂–Ω–∞—è –º–∞–≥–∏—è**  
   –ö–æ–≥–¥–∞ —Ç—ã –≤—ã–∑—ã–≤–∞–µ—à—å `t.Helper()` –≤–Ω—É—Ç—Ä–∏ —Ö–µ–ª–ø–µ—Ä–∞, Go –ø–æ–Ω–∏–º–∞–µ—Ç: "—ç—Ç–æ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è".  
   –ü—Ä–∏ –æ—à–∏–±–∫–µ –≤ —Ç–µ—Å—Ç–µ **–Ω–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω –≤ —Å–∞–º–æ–º —Ç–µ—Å—Ç–µ**, –∞ –Ω–µ –≤–Ω—É—Ç—Ä–∏ —Ö–µ–ª–ø–µ—Ä–∞.

   –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ –æ—à–∏–±–∫–∏:
   ```
   // –ë–µ–∑ t.Helper()
   testing_helpers_test.go:15: got nil; want &User{...}

   // –° t.Helper()
   testing_helpers_test.go:45: assertNotNil failed  // ‚Üê —Å—Ç—Ä–æ–∫–∞ –∏–∑ TestUserCreation!
   ```

   –≠—Ç–æ —Å–∏–ª—å–Ω–æ —É–ø—Ä–æ—â–∞–µ—Ç –æ—Ç–ª–∞–¥–∫—É: —Ç—ã —Å—Ä–∞–∑—É –≤–∏–¥–∏—à—å, –≤ –∫–∞–∫–æ–º —Ç–µ—Å—Ç–µ –ø—Ä–æ–±–ª–µ–º–∞.

#### –ö–æ–≥–¥–∞ —Å—Ç–æ–∏—Ç –ø–∏—Å–∞—Ç—å —Ö–µ–ª–ø–µ—Ä—ã
- –ï—Å–ª–∏ –æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–µ—Å—Ç–∞—Ö.
- –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å table-driven tests (—Ç–∞–±–ª–∏—Ü—É —Ç–µ—Å—Ç–æ–≤) –∏ —Å–¥–µ–ª–∞—Ç—å –∏—Ö –∫–æ–º–ø–∞–∫—Ç–Ω—ã–º–∏.
- –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –±–æ–ª—å—à–æ–π –∏ —Ç–µ—Å—Ç—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Ç—Ä—É–¥–Ω–æ—á–∏—Ç–∞–µ–º—ã–º–∏.

#### –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ö–µ–ª–ø–µ—Ä—ã 
```go
func assertEqual[T comparable](t *testing.T, got, want T) {
    t.Helper()
    if got != want {
        t.Errorf("got %v, want %v", got, want)
    }
}

func assertNoError(t *testing.T, err error) {
    t.Helper()
    if err != nil {
        t.Errorf("unexpected error: %v", err)
    }
}

func assertError(t *testing.T, err error) {
    t.Helper()
    if err == nil {
        t.Error("expected error, got nil")
    }
}
```

–° –¥–∂–µ–Ω–µ—Ä–∏–∫–∞–º–∏ (Go 1.18+) `assertEqual` —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º —Å—Ä–∞–≤–Ω–∏–º—ã–º —Ç–∏–ø–æ–º.

#### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã (–¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏)
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ **testify** (`require`, `assert`) ‚Äî –æ—á–µ–Ω—å –ø–æ–ø—É–ª—è—Ä–Ω–∞, –¥–∞—ë—Ç –≥–æ—Ç–æ–≤—ã–µ —Ö–µ–ª–ø–µ—Ä—ã.
- **gotest.tools/assert** ‚Äî –ª—ë–≥–∫–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞.
- –ù–æ –≤ –Ω–µ–±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö –∏–ª–∏ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è ‚Äî —Å–≤–æ–∏ —Ö–µ–ª–ø–µ—Ä—ã –æ—Ç–ª–∏—á–Ω–æ —É—á–∞—Ç –ø–æ–Ω–∏–º–∞—Ç—å, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–µ—Å—Ç—ã.


### –ü—Ä–∏–º–µ—Ä—ã 

```go
// –§–∞–π–ª: testing_helpers_test.go
package myapp

import (
    "testing"
)

// assertEqual - –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π
func assertEqual(t *testing.T, got, want interface{}) {
    t.Helper() // –£–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
    if got != want {
        t.Errorf("got %v; want %v", got, want)
    }
}

// assertError - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–∫–∏
func assertError(t *testing.T, err error, wantErr bool) {
    t.Helper()
    if (err != nil) != wantErr {
        t.Errorf("error = %v; wantErr = %v", err, wantErr)
    }
}

// assertNil - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ nil
func assertNil(t *testing.T, got interface{}) {
    t.Helper()
    if got != nil {
        t.Errorf("expected nil, got %v", got)
    }
}

// assertNotNil - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ nil
func assertNotNil(t *testing.T, got interface{}) {
    t.Helper()
    if got == nil {
        t.Error("expected non-nil value")
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ö–µ–ª–ø–µ—Ä–æ–≤
func TestUserCreation(t *testing.T) {
    user := CreateUser("john", "john@example.com")
    
    assertNotNil(t, user)
    assertEqual(t, user.Username, "john")
    assertEqual(t, user.Email, "john@example.com")
}
```

## –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

–ú–æ–∫–∏ (mocks) ‚Äî —ç—Ç–æ –ø–æ–¥–¥–µ–ª—å–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –∏–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ç–µ—Å—Ç–∞—Ö.
–û–Ω–∏ –∏–º–∏—Ç–∏—Ä—É—é—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –≤–Ω–µ—à–Ω–∏—Ö API, —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã), –Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç –±—ã—Å—Ç—Ä–æ, –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ –∏ –±–µ–∑ –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤.

### –ß—Ç–æ —Ç–∞–∫–æ–µ –º–æ–∫–∏ –∏ –∑–∞—á–µ–º –æ–Ω–∏ –Ω—É–∂–Ω—ã? 

**–ú–æ–∫–∏ (mocks)** ‚Äî —ç—Ç–æ **–ø–æ–¥–¥–µ–ª—å–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏** –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –∏–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ –≤ —Ç–µ—Å—Ç–∞—Ö**.  
–û–Ω–∏ –∏–º–∏—Ç–∏—Ä—É—é—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –≤–Ω–µ—à–Ω–∏—Ö API, —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã), –Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç –±—ã—Å—Ç—Ä–æ, –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ –∏ –±–µ–∑ –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤.

#### –ó–∞—á–µ–º –Ω—É–∂–Ω—ã –º–æ–∫–∏?
1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –≤ –∏–∑–æ–ª—è—Ü–∏–∏**  
   –¢—ã —Ö–æ—á–µ—à—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–≤–æ–π —Å–µ—Ä–≤–∏—Å (`UserService`), –∞ –Ω–µ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö.  
   –° –º–æ–∫–∞–º–∏ —Ç—ã –º–æ–∂–µ—à—å —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–æ–¥–µ —Å–µ—Ä–≤–∏—Å–∞, –Ω–µ –∑–∞–ø—É—Å–∫–∞—è –Ω–∞—Å—Ç–æ—è—â—É—é –ë–î.

2. **–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**  
   –¢—ã –º–æ–∂–µ—à—å –∑–∞—Å—Ç–∞–≤–∏—Ç—å –º–æ–∫ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å:
   - –£—Å–ø–µ—à–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
   - –û—à–∏–±–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω")
   - –õ—é–±—ã–µ –¥–∞–Ω–Ω—ã–µ, –∫–∞–∫–∏–µ –Ω—É–∂–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∞

3. **–ë—ã—Å—Ç—Ä—ã–µ –∏ –Ω–∞–¥—ë–∂–Ω—ã–µ —Ç–µ—Å—Ç—ã**  
   –¢–µ—Å—Ç—ã —Å –º–æ–∫–∞–º–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∑–∞ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã, –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Å–µ—Ç–∏, –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.  
   –û–Ω–∏ –≤—Å–µ–≥–¥–∞ –¥–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

4. **–ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å–ª–æ–∂–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**  
   –ù–∞–ø—Ä–∏–º–µ—Ä:
   - –ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤–µ—Ä–Ω—ë—Ç –æ—à–∏–±–∫—É?
   - –ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º email —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç?
   –° —Ä–µ–∞–ª—å–Ω–æ–π –ë–î —ç—Ç–æ —Å–ª–æ–∂–Ω–æ —Å–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å, –∞ —Å –º–æ–∫–∞–º–∏ ‚Äî –ª–µ–≥–∫–æ.

#### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ø—Ä–∏–º–µ—Ä–µ –Ω–∏–∂–µ
- –£ —Ç–µ–±—è –µ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `UserRepository` ‚Äî —ç—Ç–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.
- –†–µ–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å PostgreSQL) –±—É–¥–µ—Ç –≥–¥–µ-—Ç–æ –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ.
- –í —Ç–µ—Å—Ç–∞—Ö —Ç—ã —Å–æ–∑–¥–∞—ë—à—å **MockUserRepository** ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –∫–æ—Ç–æ—Ä–∞—è —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Ç–æ—Ç –∂–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –Ω–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∑–∞–¥–∞—ë—à—å —Å–∞–º —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏–∏ (`GetByIDFunc`, `CreateFunc` –∏ —Ç.–¥.).
- –ü–µ—Ä–µ–¥–∞—ë—à—å —ç—Ç–æ—Ç –º–æ–∫ –≤ `UserService` ‚Äî –∏ —Å–µ—Ä–≤–∏—Å –¥—É–º–∞–µ—Ç, —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–∞—Å—Ç–æ—è—â–∏–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º.

```go
mockRepo := &MockUserRepository{
    GetByIDFunc: func(ctx context.Context, id int) (*User, error) {
        return &User{ID: 1, Username: "john", Email: "john@example.com"}, nil
    },
}

service := NewUserService(mockRepo)  // —Å–µ—Ä–≤–∏—Å –Ω–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ –º–æ–∫!
user, err := service.GetUser(ctx, 1)
```

#### –ü–æ—á–µ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ç–∞–∫ –≤–∞–∂–Ω—ã –¥–ª—è –º–æ–∫–æ–≤?
–ü–æ—Ç–æ–º—É —á—Ç–æ –≤ Go **–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã**.  
–ë–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ç–æ–º—É:
- –°–µ—Ä–≤–∏—Å –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–ë–î, —Ñ–∞–π–ª, –ø–∞–º—è—Ç—å).
- –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ ‚Äî –Ω–∞—Å—Ç–æ—è—â–∞—è –ë–î.
- –í —Ç–µ—Å—Ç–∞—Ö ‚Äî –º–æ–∫.
–≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **–≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (dependency injection)** ‚Äî –æ–¥–∏–Ω –∏–∑ –∫–ª—é—á–µ–≤—ã—Ö –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ —Ö–æ—Ä–æ—à–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

#### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –º–æ–∫–∞–º (–¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏)
- **–¢–µ—Å—Ç–æ–≤–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** (–≤ –ø–∞–º—è—Ç–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, SQLite) ‚Äî –º–µ–¥–ª–µ–Ω–Ω–µ–µ, —Å–ª–æ–∂–Ω–µ–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å.
- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –º–æ–∫–æ–≤**: `testify/mock`, `gomock` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç –º–æ–∫–∏, –Ω–æ –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä—É—á–Ω—ã–µ –º–æ–∫–∏ (–∫–∞–∫ –≤ –ø—Ä–∏–º–µ—Ä–µ) ‚Äî –ª—É—á—à–∏–π —Å–ø–æ—Å–æ–± –ø–æ–Ω—è—Ç—å —Å—É—Ç—å.



### –ü—Ä–∏–º–µ—Ä—ã 

```go
// –§–∞–π–ª: user_service.go
package service

import (
    "context"
    "errors"
)

// UserRepository - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
type UserRepository interface {
    GetByID(ctx context.Context, id int) (*User, error)
    Create(ctx context.Context, user *User) error
    Update(ctx context.Context, user *User) error
    Delete(ctx context.Context, id int) error
}

type User struct {
    ID       int
    Username string
    Email    string
}

type UserService struct {
    repo UserRepository
}

func NewUserService(repo UserRepository) *UserService {
    return &UserService{repo: repo}
}

func (s *UserService) GetUser(ctx context.Context, id int) (*User, error) {
    if id <= 0 {
        return nil, errors.New("–Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π ID")
    }
    return s.repo.GetByID(ctx, id)
}

func (s *UserService) CreateUser(ctx context.Context, username, email string) (*User, error) {
    if username == "" {
        return nil, errors.New("username –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω")
    }
    if email == "" {
        return nil, errors.New("email –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω")
    }
    
    user := &User{
        Username: username,
        Email:    email,
    }
    
    if err := s.repo.Create(ctx, user); err != nil {
        return nil, err
    }
    
    return user, nil
}
```

```go
// –§–∞–π–ª: user_service_test.go
package service

import (
    "context"
    "errors"
    "testing"
)

// MockUserRepository - –º–æ–∫ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
type MockUserRepository struct {
    GetByIDFunc func(ctx context.Context, id int) (*User, error)
    CreateFunc  func(ctx context.Context, user *User) error
    UpdateFunc  func(ctx context.Context, user *User) error
    DeleteFunc  func(ctx context.Context, id int) error
}

func (m *MockUserRepository) GetByID(ctx context.Context, id int) (*User, error) {
    if m.GetByIDFunc != nil {
        return m.GetByIDFunc(ctx, id)
    }
    return nil, errors.New("–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ")
}

func (m *MockUserRepository) Create(ctx context.Context, user *User) error {
    if m.CreateFunc != nil {
        return m.CreateFunc(ctx, user)
    }
    return errors.New("–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ")
}

func (m *MockUserRepository) Update(ctx context.Context, user *User) error {
    if m.UpdateFunc != nil {
        return m.UpdateFunc(ctx, user)
    }
    return errors.New("–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ")
}

func (m *MockUserRepository) Delete(ctx context.Context, id int) error {
    if m.DeleteFunc != nil {
        return m.DeleteFunc(ctx, id)
    }
    return errors.New("–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ")
}

func TestGetUser(t *testing.T) {
    tests := []struct {
        name      string
        userID    int
        mockFunc  func(ctx context.Context, id int) (*User, error)
        wantErr   bool
        wantUser  *User
    }{
        {
            name:   "—É—Å–ø–µ—à–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
            userID: 1,
            mockFunc: func(ctx context.Context, id int) (*User, error) {
                return &User{ID: 1, Username: "john", Email: "john@example.com"}, nil
            },
            wantErr:  false,
            wantUser: &User{ID: 1, Username: "john", Email: "john@example.com"},
        },
        {
            name:   "–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω",
            userID: 999,
            mockFunc: func(ctx context.Context, id int) (*User, error) {
                return nil, errors.New("–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω")
            },
            wantErr:  true,
            wantUser: nil,
        },
        {
            name:     "–Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π ID",
            userID:   -1,
            mockFunc: nil,
            wantErr:  true,
            wantUser: nil,
        },
    }
    
    for _, tt := range tests {
        t.Run(tt.name, func(t *testing.T) {
            mockRepo := &MockUserRepository{
                GetByIDFunc: tt.mockFunc,
            }
            
            service := NewUserService(mockRepo)
            user, err := service.GetUser(context.Background(), tt.userID)
            
            if (err != nil) != tt.wantErr {
                t.Errorf("GetUser() error = %v, wantErr %v", err, tt.wantErr)
                return
            }
            
            if !tt.wantErr && user.Username != tt.wantUser.Username {
                t.Errorf("GetUser() = %v, want %v", user, tt.wantUser)
            }
        })
    }
}

func TestCreateUser(t *testing.T) {
    tests := []struct {
        name      string
        username  string
        email     string
        mockFunc  func(ctx context.Context, user *User) error
        wantErr   bool
    }{
        {
            name:     "—É—Å–ø–µ—à–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ",
            username: "john",
            email:    "john@example.com",
            mockFunc: func(ctx context.Context, user *User) error {
                user.ID = 1
                return nil
            },
            wantErr: false,
        },
        {
            name:     "–ø—É—Å—Ç–æ–π username",
            username: "",
            email:    "john@example.com",
            mockFunc: nil,
            wantErr:  true,
        },
        {
            name:     "–ø—É—Å—Ç–æ–π email",
            username: "john",
            email:    "",
            mockFunc: nil,
            wantErr:  true,
        },
        {
            name:     "–æ—à–∏–±–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è",
            username: "john",
            email:    "john@example.com",
            mockFunc: func(ctx context.Context, user *User) error {
                return errors.New("–æ—à–∏–±–∫–∞ –ë–î")
            },
            wantErr: true,
        },
    }
    
    for _, tt := range tests {
        t.Run(tt.name, func(t *testing.T) {
            mockRepo := &MockUserRepository{
                CreateFunc: tt.mockFunc,
            }
            
            service := NewUserService(mockRepo)
            _, err := service.CreateUser(context.Background(), tt.username, tt.email)
            
            if (err != nil) != tt.wantErr {
                t.Errorf("CreateUser() error = %v, wantErr %v", err, tt.wantErr)
            }
        })
    }
}
```

## –ë–µ–Ω—á–º–∞—Ä–∫–∏ (Benchmarking)

### –ß—Ç–æ —Ç–∞–∫–æ–µ –±–µ–Ω—á–º–∞—Ä–∫–∏

**–ë–µ–Ω—á–º–∞—Ä–∫–∏** (benchmarks) ‚Äî —ç—Ç–æ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**, –∫–æ—Ç–æ—Ä—ã–µ –∏–∑–º–µ—Ä—è—é—Ç, **–Ω–∞—Å–∫–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ** —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–≤–æ–π –∫–æ–¥ (–∏ —Å–∫–æ–ª—å–∫–æ –ø–∞–º—è—Ç–∏ –æ–Ω –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç).

–û–Ω–∏ –æ—Ç–≤–µ—á–∞—é—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã:
- –°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–Ω–∏–º–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏?
- –ö–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –±—ã—Å—Ç—Ä–µ–µ: —Ü–∏–∫–ª—ã, —Ä–µ–∫—É—Ä—Å–∏—è, strings.Builder –∏–ª–∏ –æ–±—ã—á–Ω—ã–π `+`?
- –°–∫–æ–ª—å–∫–æ –ø–∞–º—è—Ç–∏ –≤—ã–¥–µ–ª—è–µ—Ç—Å—è (allocations)?
- –ö–∞–∫ –∫–æ–¥ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏?

#### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–Ω—á–º–∞—Ä–∫–∏ –≤ Go
- –ü–∏—à–µ—à—å —Ñ—É–Ω–∫—Ü–∏—é —Å –∏–º–µ–Ω–µ–º `BenchmarkXXX(b *testing.B)`.
- –í–Ω—É—Ç—Ä–∏ —Ü–∏–∫–ª–∞ `for i := 0; i < b.N; i++ { ... }` –≤—ã–ø–æ–ª–Ω—è–µ—à—å —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–π –∫–æ–¥.
- Go —Å–∞–º –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `b.N` (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Ç–µ—Ä–∞—Ü–∏–π), —á—Ç–æ–±—ã –±–µ–Ω—á–º–∞—Ä–∫ –¥–ª–∏–ª—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ–ª–≥–æ (–æ–±—ã—á–Ω–æ ~1 —Å–µ–∫—É–Ω–¥–∞) –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—ã–ª —Ç–æ—á–Ω—ã–º.
- –ó–∞–ø—É—Å–∫–∞–µ—à—å –∫–æ–º–∞–Ω–¥–æ–π `go test -bench=.`

#### –ü—Ä–∏–º–µ—Ä
```go
func BenchmarkFibonacci(b *testing.B) {
    for i := 0; i < b.N; i++ {
        Fibonacci(20)  // —Ç–µ—Å—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –§–∏–±–æ–Ω–∞—á—á–∏
    }
}
```

Go –∑–∞–ø—É—Å—Ç–∏—Ç —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –º–∏–ª–ª–∏–æ–Ω—ã —Ä–∞–∑ (b.N –±—É–¥–µ—Ç –±–æ–ª—å—à–∏–º), –∏–∑–º–µ—Ä–∏—Ç –≤—Ä–µ–º—è –∏ –≤—ã–¥–∞—Å—Ç —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:
```
BenchmarkFibonacci-8    12345678    95.2 ns/op
```
–≠—Ç–æ –∑–Ω–∞—á–∏—Ç:
- –ù–∞ 8-—è–¥–µ—Ä–Ω–æ–π –º–∞—à–∏–Ω–µ
- 12 –º–∏–ª–ª–∏–æ–Ω–æ–≤ –∏—Ç–µ—Ä–∞—Ü–∏–π
- –í —Å—Ä–µ–¥–Ω–µ–º 95.2 –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥ –Ω–∞ –æ–¥–Ω—É –æ–ø–µ—Ä–∞—Ü–∏—é

#### –ü–æ–ª–µ–∑–Ω—ã–µ —Ñ–∏—à–∫–∏
- **-benchmem** ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏:
  ```
  12345678    95.2 ns/op    48 B/op    3 allocs/op
  ```
  (—Å–∫–æ–ª—å–∫–æ –±–∞–π—Ç –∏ —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤—ã–¥–µ–ª—è–ª–∞—Å—å –ø–∞–º—è—Ç—å –Ω–∞ –∏—Ç–µ—Ä–∞—Ü–∏—é)

- **b.ReportAllocs()** ‚Äî –≤–∫–ª—é—á–∞–µ—Ç –æ—Ç—á—ë—Ç –æ –ø–∞–º—è—Ç–∏ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Å—É–±-–±–µ–Ω—á–º–∞—Ä–∫–µ.

- **b.ResetTimer() / b.StopTimer() / b.StartTimer()** ‚Äî —É–ø—Ä–∞–≤–ª—è—é—Ç —Ç–∞–π–º–µ—Ä–æ–º, —á—Ç–æ–±—ã –Ω–µ —É—á–∏—Ç—ã–≤–∞—Ç—å –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –¥–∞–Ω–Ω—ã—Ö.

- **b.RunParallel()** ‚Äî —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≥–æ—Ä—É—Ç–∏–Ω–∞—Ö (–≤–∞–∂–Ω–æ –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π).

- **–¢–∞–±–ª–∏—Ü–∞ –±–µ–Ω—á–º–∞—Ä–∫–æ–≤** (`b.Run`) ‚Äî —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—à—å —Ä–∞–∑–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ –æ–¥–Ω–æ–º —Ç–µ—Å—Ç–µ.

#### –ó–∞—á–µ–º –Ω—É–∂–Ω—ã –±–µ–Ω—á–º–∞—Ä–∫–∏?
1. **–í—ã–±–∏—Ä–∞–µ—à—å –ª—É—á—à–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º**  
   –ù–∞–ø—Ä–∏–º–µ—Ä, —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—à—å –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—é —Å—Ç—Ä–æ–∫ —á–µ—Ä–µ–∑ `+` –∏ —á–µ—Ä–µ–∑ `strings.Builder` ‚Äî —Å—Ä–∞–∑—É –≤–∏–¥–Ω–æ, —á—Ç–æ Builder –≤ –¥–µ—Å—è—Ç–∫–∏ —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ –∏ –Ω–µ –≤—ã–¥–µ–ª—è–µ—Ç –ª–∏—à–Ω—é—é –ø–∞–º—è—Ç—å.

2. **–õ–æ–≤–∏—à—å —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**  
   –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—à—å –±–µ–Ω—á–º–∞—Ä–∫–∏ ‚Äî –µ—Å–ª–∏ —Å—Ç–∞–ª–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ, —Å—Ä–∞–∑—É –≤–∏–¥–Ω–æ.

3. **–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—à—å –∫–æ–¥**  
   –ü–æ–Ω–∏–º–∞–µ—à—å, –≥–¥–µ —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ (–º–Ω–æ–≥–æ –∞–ª–ª–æ–∫–∞—Ü–∏–π, –º–µ–¥–ª–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏).

4. **–ü—Ä–æ–≤–µ—Ä—è–µ—à—å –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**  
   –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –±–µ–Ω—á–º–∞—Ä–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, –∫–∞–∫ –∫–æ–¥ –≤–µ–¥—ë—Ç —Å–µ–±—è –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π.

#### –ö–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å –∏ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å
```bash
go test -bench=. -benchmem          # –≤—Å–µ –±–µ–Ω—á–º–∞—Ä–∫–∏ —Å –ø–∞–º—è—Ç—å—é
go test -bench=Fibonacci -count=10  # 10 –ø—Ä–æ–≥–æ–Ω–æ–≤ –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏
go test -bench=. -benchtime=5s      # –ø—Ä–æ–≥–æ–Ω—è—Ç—å –¥–æ–ª—å—à–µ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
```

–î–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–æ/–ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
```bash
go test -bench=. -benchmem > old.txt
# –º–µ–Ω—è–µ—à—å –∫–æ–¥
go test -bench=. -benchmem > new.txt
benchstat old.txt new.txt  # —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
```

### –ü—Ä–∏–º–µ—Ä—ã

```go
// –§–∞–π–ª: performance_test.go
package algorithms

import (
    "testing"
)

// –ü—Ä–æ—Å—Ç–æ–π –±–µ–Ω—á–º–∞—Ä–∫
func BenchmarkFibonacci(b *testing.B) {
    for i := 0; i < b.N; i++ {
        Fibonacci(20)
    }
}

// –ë–µ–Ω—á–º–∞—Ä–∫ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
func BenchmarkFibonacciTable(b *testing.B) {
    tests := []struct {
        name string
        n    int
    }{
        {"Fibonacci10", 10},
        {"Fibonacci20", 20},
        {"Fibonacci30", 30},
    }
    
    for _, tt := range tests {
        b.Run(tt.name, func(b *testing.B) {
            for i := 0; i < b.N; i++ {
                Fibonacci(tt.n)
            }
        })
    }
}

// –ë–µ–Ω—á–º–∞—Ä–∫ —Å –≤—ã–¥–µ–ª–µ–Ω–∏–µ–º –ø–∞–º—è—Ç–∏
func BenchmarkStringConcat(b *testing.B) {
    b.Run("–æ–ø–µ—Ä–∞—Ç–æ—Ä +", func(b *testing.B) {
        b.ReportAllocs() // –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—ã–¥–µ–ª–µ–Ω–∏–∏ –ø–∞–º—è—Ç–∏
        for i := 0; i < b.N; i++ {
            result := ""
            for j := 0; j < 100; j++ {
                result += "x"
            }
        }
    })
    
    b.Run("strings.Builder", func(b *testing.B) {
        b.ReportAllocs()
        for i := 0; i < b.N; i++ {
            var builder strings.Builder
            for j := 0; j < 100; j++ {
                builder.WriteString("x")
            }
            _ = builder.String()
        }
    })
}

// –ë–µ–Ω—á–º–∞—Ä–∫ —Å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –ø–æ–¥–≥–æ—Ç–æ–≤–∫–æ–π
func BenchmarkSortLargeSlice(b *testing.B) {
    // –î–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –∏–∑–º–µ—Ä–µ–Ω–∏–π
    data := generateRandomSlice(10000)
    
    b.ResetTimer() // –°–±—Ä–æ—Å —Ç–∞–π–º–µ—Ä–∞ –ø–æ—Å–ª–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏
    
    for i := 0; i < b.N; i++ {
        b.StopTimer() // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
        dataCopy := make([]int, len(data))
        copy(dataCopy, data)
        b.StartTimer() // –í–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–π–º–µ—Ä
        
        sort.Ints(dataCopy)
    }
}

// –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –±–µ–Ω—á–º–∞—Ä–∫–∏
func BenchmarkParallelProcessing(b *testing.B) {
    b.RunParallel(func(pb *testing.PB) {
        for pb.Next() {
            // –ö–æ–¥, –≤—ã–ø–æ–ª–Ω—è–µ–º—ã–π –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
            ProcessData(generateData())
        }
    })
}
```

–ó–∞–ø—É—Å–∫ –±–µ–Ω—á–º–∞—Ä–∫–æ–≤:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ –±–µ–Ω—á–º–∞—Ä–∫–∏
go test -bench=.

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –±–µ–Ω—á–º–∞—Ä–∫
go test -bench=BenchmarkFibonacci

# –° –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–∞–º—è—Ç–∏
go test -bench=. -benchmem

# –ù–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–≥–æ–Ω–æ–≤ –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏
go test -bench=. -count=5

# –ó–∞–ø—É—Å–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è
go test -bench=. -benchtime=10s

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
go test -bench=. -benchmem > old.txt
# –í–Ω–æ—Å–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥
go test -bench=. -benchmem > new.txt
# –ò—Å–ø–æ–ª—å–∑—É–µ–º benchcmp –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
benchcmp old.txt new.txt
```

## –ü—Ä–∏–º–µ—Ä—ã

–ü—Ä–∏–º–µ—Ä—ã –≤ Go —Å–ª—É–∂–∞—Ç –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π, —Ç–∞–∫ –∏ —Ç–µ—Å—Ç–∞–º–∏:

```go
// –§–∞–π–ª: example_test.go
package stringutils

import (
    "fmt"
)

// –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä
func ExampleReverse() {
    result := Reverse("hello")
    fmt.Println(result)
    // –í—ã–≤–æ–¥: olleh
}

// –ü—Ä–∏–º–µ—Ä —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
func ExampleSplit() {
    parts := Split("one,two,three", ",")
    for _, part := range parts {
        fmt.Println(part)
    }
    // –í—ã–≤–æ–¥:
    // one
    // two
    // three
}

// –ü—Ä–∏–º–µ—Ä –¥–ª—è –º–µ—Ç–æ–¥–∞
func ExampleUser_FullName() {
    user := User{
        FirstName: "John",
        LastName:  "Doe",
    }
    fmt.Println(user.FullName())
    // –í—ã–≤–æ–¥: John Doe
}

// –ü—Ä–∏–º–µ—Ä —Å –Ω–µ—É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
func ExampleGetUsers() {
    users := GetUsers()
    for id := range users {
        fmt.Println(id)
    }
    // Unordered –í—ã–≤–æ–¥:
    // 1
    // 2
    // 3
}

// –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã (–≤–∞—Ä–∏–∞–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
func ExampleReverse_unicode() {
    result := Reverse("–ø—Ä–∏–≤–µ—Ç")
    fmt.Println(result)
    // –í—ã–≤–æ–¥: —Ç–µ–≤–∏—Ä–ø
}

func ExampleReverse_empty() {
    result := Reverse("")
    fmt.Println(result)
    // –í—ã–≤–æ–¥: 
}
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ß—Ç–æ —Ç–∞–∫–æ–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ?

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî —ç—Ç–æ –≤–∏–¥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, **–∫–∞–∫ —Ä–∞–∑–Ω—ã–µ —á–∞—Å—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ** (–∏–Ω—Ç–µ–≥—Ä–∏—Ä—É—é—Ç—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º), –∞ –Ω–µ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏.

–ï—Å–ª–∏ **—é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã** –ø—Ä–æ–≤–µ—Ä—è—é—Ç –æ–¥–Ω—É —Ñ—É–Ω–∫—Ü–∏—é –∏–ª–∏ —Å–µ—Ä–≤–∏—Å –≤ –∏–∑–æ–ª—è—Ü–∏–∏ (—Å –º–æ–∫–∞–º–∏ –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π), —Ç–æ **–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** –∏—Å–ø–æ–ª—å–∑—É—é—Ç **—Ä–µ–∞–ª—å–Ω—ã–µ** –∏–ª–∏ –ø–æ—á—Ç–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö, —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É, –≤–Ω–µ—à–Ω–∏–µ API, –∫—ç—à –∏ —Ç.–¥.

#### –ì–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å
–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ:
- –ú–æ–¥—É–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –≤–º–µ—Å—Ç–µ —Ç–æ–∂–µ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.
- –î–∞–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –º–µ–∂–¥—É —Å–ª–æ—è–º–∏ (—Å–µ—Ä–≤–∏—Å ‚Üí —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚Üí –ë–î).
- –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º –Ω–∞ —Å—Ç—ã–∫–∞—Ö: –æ—à–∏–±–∫–∏ –º–∞–ø–ø–∏–Ω–≥–∞, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ SQL-–∑–∞–ø—Ä–æ—Å—ã, –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ –∏ —Ç.–¥.

#### –ü—Ä–∏–º–µ—Ä 
```go
func TestUserCRUD(t *testing.T) {
    db := setupTestDB(t)        // –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –Ω–∞—Å—Ç–æ—è—â–µ–π —Ç–µ—Å—Ç–æ–≤–æ–π –ë–î
    repo := NewUserRepository(db)  // —Ä–µ–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç SQL-–∑–∞–ø—Ä–æ—Å—ã

    // –°–æ–∑–¥–∞—ë–º, —á–∏—Ç–∞–µ–º, –æ–±–Ω–æ–≤–ª—è–µ–º, —É–¥–∞–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    // –í—Å—ë –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
}
```

–ó–¥–µ—Å—å —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è, –Ω–æ –∏:
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL?
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –Ω–∞–ø–∏—Å–∞–Ω—ã SQL-–∑–∞–ø—Ä–æ—Å—ã?
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç ID?
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –æ—á–∏—â–∞—é—Ç—Å—è —Ç–∞–±–ª–∏—Ü—ã –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏?

–≠—Ç–æ —É–∂–µ **–Ω–µ —é–Ω–∏—Ç-—Ç–µ—Å—Ç**, –ø–æ—Ç–æ–º—É —á—Ç–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º—ã (–ë–î).

#### –û—Ç–ª–∏—á–∏—è –æ—Ç —é–Ω–∏—Ç-—Ç–µ—Å—Ç–æ–≤

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞              | –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã                          | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã                     |
|--------------------------------|-------------------------------------|------------------------------------------|
| –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º                  | –û–¥–∏–Ω –º–æ–¥—É–ª—å –≤ –∏–∑–æ–ª—è—Ü–∏–∏              | –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–æ–¥—É–ª–µ–π        |
| –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏                    | –ú–æ–∫–∏ –∏–ª–∏ –∑–∞–≥–ª—É—à–∫–∏                   | –†–µ–∞–ª—å–Ω—ã–µ (–ë–î, API, —Ñ–∞–π–ª—ã) –∏–ª–∏ —Ç–µ—Å—Ç–æ–≤—ã–µ   |
| –°–∫–æ—Ä–æ—Å—Ç—å                       | –û—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–µ (–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã)        | –ú–µ–¥–ª–µ–Ω–Ω–µ–µ (—Å–µ–∫—É–Ω–¥—ã)                      |
| –ó–∞–ø—É—Å–∫                         | –ß–∞—Å—Ç–æ (–ø—Ä–∏ –∫–∞–∂–¥–æ–º `go test`)        | –†–µ–∂–µ, –æ—Ç–¥–µ–ª—å–Ω–æ (—Å —Ç–µ–≥–∞–º–∏, —Ñ–ª–∞–≥–∞–º–∏)       |
| –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å                     | –û—á–µ–Ω—å —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ                    | –ú–æ–≥—É—Ç –ø–∞–¥–∞—Ç—å –∏–∑-–∑–∞ –≤–Ω–µ—à–Ω–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤      |
| –ö–æ–≥–¥–∞ –ø–∏—Å–∞—Ç—å                   | –í—Å–µ–≥–¥–∞, –¥–ª—è –≤—Å–µ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏      | –î–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π (–ë–î, API)     |

#### –ö–æ–≥–¥–∞ –Ω—É–∂–Ω—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (GORM, sqlx, sql).
- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ (HTTP-–∫–ª–∏–µ–Ω—Ç—ã, message brokers).
- –°–ª–æ–∂–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö.
- –ü–æ–ª–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (end-to-end –±–µ–∑ UI).

#### –ö–∞–∫ –æ–±—ã—á–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑—É—é—Ç –≤ Go
- –ü–æ–º–µ—á–∞—é—Ç —Ç–µ–≥–∏: `//go:build integration` –∏–ª–∏ `// +build integration`.
- –ó–∞–ø—É—Å–∫–∞—é—Ç –æ—Ç–¥–µ–ª—å–Ω–æ: `go test -tags=integration`.
- –ü—Ä–æ–ø—É—Å–∫–∞—é—Ç –≤ –∫–æ—Ä–æ—Ç–∫–æ–º —Ä–µ–∂–∏–º–µ: `if testing.Short() { t.Skip() }`.
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–µ—Å—Ç–æ–≤—É—é –ë–î (–æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ –∏–ª–∏ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä).
- –û—á–∏—â–∞—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–µ—Ä–µ–¥/–ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞ (setup/teardown).

### –ü—Ä–∏–º–µ—Ä

```go
// –§–∞–π–ª: integration_test.go
// +build integration

package integration

import (
    "context"
    "database/sql"
    "testing"
    "time"
    
    _ "github.com/lib/pq"
)

func setupTestDB(t *testing.T) *sql.DB {
    t.Helper()
    
    // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ç–µ—Å—Ç–æ–≤–æ–π –ë–î
    db, err := sql.Open("postgres", "postgresql://user:pass@localhost/testdb?sslmode=disable")
    if err != nil {
        t.Fatalf("–Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î: %v", err)
    }
    
    // –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–æ–º
    _, err = db.Exec("TRUNCATE TABLE users RESTART IDENTITY CASCADE")
    if err != nil {
        t.Fatalf("–Ω–µ —É–¥–∞–ª–æ—Å—å –æ—á–∏—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É: %v", err)
    }
    
    return db
}

func teardownTestDB(t *testing.T, db *sql.DB) {
    t.Helper()
    if err := db.Close(); err != nil {
        t.Errorf("–æ—à–∏–±–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –ë–î: %v", err)
    }
}

func TestUserCRUD(t *testing.T) {
    if testing.Short() {
        t.Skip("–ø—Ä–æ–ø—É—Å–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ –≤ –∫–æ—Ä–æ—Ç–∫–æ–º —Ä–µ–∂–∏–º–µ")
    }
    
    db := setupTestDB(t)
    defer teardownTestDB(t, db)
    
    repo := NewUserRepository(db)
    ctx := context.Background()
    
    // –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    t.Run("—Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è", func(t *testing.T) {
        user := &User{
            Username: "john_doe",
            Email:    "john@example.com",
        }
        
        err := repo.Create(ctx, user)
        if err != nil {
            t.Fatalf("–æ—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: %v", err)
        }
        
        if user.ID == 0 {
            t.Error("ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
        }
    })
    
    // –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    t.Run("–ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è", func(t *testing.T) {
        user, err := repo.GetByID(ctx, 1)
        if err != nil {
            t.Fatalf("–æ—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: %v", err)
        }
        
        if user.Username != "john_doe" {
            t.Errorf("username = %s; –æ–∂–∏–¥–∞–µ—Ç—Å—è john_doe", user.Username)
        }
    })
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    t.Run("–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è", func(t *testing.T) {
        user, _ := repo.GetByID(ctx, 1)
        user.Email = "newemail@example.com"
        
        err := repo.Update(ctx, user)
        if err != nil {
            t.Fatalf("–æ—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: %v", err)
        }
        
        updatedUser, _ := repo.GetByID(ctx, 1)
        if updatedUser.Email != "newemail@example.com" {
            t.Errorf("email –Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω")
        }
    })
    
    // –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    t.Run("—É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è", func(t *testing.T) {
        err := repo.Delete(ctx, 1)
        if err != nil {
            t.Fatalf("–æ—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: %v", err)
        }
        
        _, err = repo.GetByID(ctx, 1)
        if err == nil {
            t.Error("–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–¥–∞–ª–µ–Ω")
        }
    })
}

// –ó–∞–ø—É—Å–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤:
// go test -tags=integration ./...
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–≥–æ –∫–æ–¥–∞

```go
// –§–∞–π–ª: concurrent_test.go
package cache

import (
    "sync"
    "testing"
    "time"
)

func TestCacheConcurrency(t *testing.T) {
    cache := NewCache()
    
    const numGoroutines = 100
    const numOperations = 1000
    
    var wg sync.WaitGroup
    wg.Add(numGoroutines * 2) // –ß–∏—Ç–∞—Ç–µ–ª–∏ –∏ –ø–∏—Å–∞—Ç–µ–ª–∏
    
    // –ü–∏—Å–∞—Ç–µ–ª–∏
    for i := 0; i < numGoroutines; i++ {
        go func(id int) {
            defer wg.Done()
            for j := 0; j < numOperations; j++ {
                key := fmt.Sprintf("key-%d-%d", id, j)
                cache.Set(key, j)
            }
        }(i)
    }
    
    // –ß–∏—Ç–∞—Ç–µ–ª–∏
    for i := 0; i < numGoroutines; i++ {
        go func(id int) {
            defer wg.Done()
            for j := 0; j < numOperations; j++ {
                key := fmt.Sprintf("key-%d-%d", id, j)
                cache.Get(key)
            }
        }(i)
    }
    
    // –¢–∞–π–º–∞—É—Ç –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –¥–µ–¥–ª–æ–∫–æ–≤
    done := make(chan struct{})
    go func() {
        wg.Wait()
        close(done)
    }()
    
    select {
    case <-done:
        // –í—Å–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å —É—Å–ø–µ—à–Ω–æ
    case <-time.After(10 * time.Second):
        t.Fatal("—Ç–µ—Å—Ç –ø—Ä–µ–≤—ã—Å–∏–ª —Ç–∞–π–º–∞—É—Ç - –≤–æ–∑–º–æ–∂–µ–Ω –¥–µ–¥–ª–æ–∫")
    }
}

func TestRaceCondition(t *testing.T) {
    counter := 0
    var mu sync.Mutex
    
    const numGoroutines = 100
    var wg sync.WaitGroup
    wg.Add(numGoroutines)
    
    for i := 0; i < numGoroutines; i++ {
        go func() {
            defer wg.Done()
            for j := 0; j < 1000; j++ {
                mu.Lock()
                counter++
                mu.Unlock()
            }
        }()
    }
    
    wg.Wait()
    
    expected := numGoroutines * 1000
    if counter != expected {
        t.Errorf("counter = %d; –æ–∂–∏–¥–∞–µ—Ç—Å—è %d", counter, expected)
    }
}

// –ó–∞–ø—É—Å–∫ —Å –¥–µ—Ç–µ–∫—Ç–æ—Ä–æ–º –≥–æ–Ω–æ–∫ –¥–∞–Ω–Ω—ã—Ö:
// go test -race
```

## –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### RPS

**RPS (Requests Per Second)** ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤, –∫–æ—Ç–æ—Ä–æ–µ —Å–µ—Ä–≤–µ—Ä —Å–ø–æ—Å–æ–±–µ–Ω –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞ 1 —Å–µ–∫—É–Ω–¥—É.

#### –ü–æ—á–µ–º—É RPS –≤–∞–∂–µ–Ω:

* –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **–ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å** —Å–µ—Ä–≤–µ—Ä–∞;
* –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å, **—Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** –≤—ã–¥–µ—Ä–∂–∏—Ç —Å–µ—Ä–≤–∏—Å;
* –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏:
  * –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏;
  * capacity planning;
  * —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π.

> <br /> –í—ã—Å–æ–∫–∏–π RPS **–Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç**, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –±—ã—Å—Ç—Ä—ã–π –∏–ª–∏ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π ‚Äî –≤—Å–µ–≥–¥–∞ —Å–º–æ—Ç—Ä–∏–º –≤–º–µ—Å—Ç–µ —Å latency –∏ error rate.


### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π HTTP-—Å–µ—Ä–≤–µ—Ä –Ω–∞ `net/http`

–ù–∞—á–Ω—ë–º —Å —Å–∞–º–æ–≥–æ –ø—Ä–æ—Å—Ç–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.

```go
package main

import (
	"net/http"
)

func main() {
	http.HandleFunc("/ping", func(w http.ResponseWriter, r *http.Request) {
		w.WriteHeader(http.StatusOK)
		w.Write([]byte("pong"))
	})

	http.ListenAndServe(":8080", nil)
}
```

#### –ß—Ç–æ –≤–∞–∂–Ω–æ:
* `net/http` **—É–∂–µ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã–π** ‚Äî –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π goroutine;
* –ª–∏–º–∏—Ç—ã –ø–æ RPS —É–ø–∏—Ä–∞—é—Ç—Å—è –Ω–µ –≤ Go, –∞ –≤:
  * CPU
  * I/O
  * –∞–ª–ª–æ–∫–∞—Ü–∏–∏
  * –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞:

1. **–¢–µ—Å—Ç–∏—Ä—É–µ–º –ª–æ–∫–∞–ª—å–Ω–æ** (–±–µ–∑ Docker, VPN –∏ Wi-Fi)
2. **–û—Ç–∫–ª—é—á–∞–µ–º –ª–∏—à–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã**
3. **–¢–µ—Å—Ç–∏—Ä—É–µ–º Release-—Å–±–æ—Ä–∫—É**
4. **–°–º–æ—Ç—Ä–∏–º CPU –∏ –ø–∞–º—è—Ç—å**

```bash
go build -o server
./server
```

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è RPS

| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç              | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
| ----------------------- | ------------------ |
| `wrk`                   | –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã      |
| `hey`                   | –ü—Ä–æ—Å—Ç–æ–π CLI        |
| `ab`                    | –£—Å—Ç–∞—Ä–µ–≤—à–∏–π         |
| `k6`                    | –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏ CI      |
| —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π Go-–±–µ–Ω—á–º–∞—Ä–∫ | –¢–æ—á–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å    |

–í —ç—Ç–æ–º —É—Ä–æ–∫–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º **`wrk`** –∏ **Go-–∫–ª–∏–µ–Ω—Ç**.

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ RPS —Å –ø–æ–º–æ—â—å—é `wrk`

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞:

```bash
brew install wrk
```

#### –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç:

```bash
wrk -t4 -c100 -d10s http://localhost:8080/ping
```

#### –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:

* `-t4` ‚Üí 4 –ø–æ—Ç–æ–∫–∞
* `-c100` ‚Üí 100 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
* `-d10s` ‚Üí —Ç–µ—Å—Ç 10 —Å–µ–∫—É–Ω–¥

#### –ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

```text
Requests/sec: 185000.32
Latency     520¬µs
```

#### –≠—Ç–æ –∑–Ω–∞—á–∏—Ç:

* —Å–µ—Ä–≤–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç ~185k RPS
* —Å—Ä–µ–¥–Ω—è—è –∑–∞–¥–µ—Ä–∂–∫–∞ ~0.5 –º—Å

### –ö–∞–∫ –ø–æ–Ω—è—Ç—å, —á—Ç–æ RPS ¬´—Ö–æ—Ä–æ—à–∏–π¬ª?

| –¢–∏–ø —Å–µ—Ä–≤–∏—Å–∞        | –ù–æ—Ä–º–∞–ª—å–Ω—ã–π RPS |
| ------------------ | -------------- |
| Ping / healthcheck | 100k+          |
| JSON API           | 10k‚Äì50k        |
| API + –ë–î           | 1k‚Äì10k         |
| –¢—è–∂—ë–ª–∞—è –ª–æ–≥–∏–∫–∞     | < 1k           |

üëâ **–í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–µ–º —Ä–µ–∞–ª—å–Ω—ã–π –∫–æ–¥**, –∞ –Ω–µ –ø—É—Å—Ç–æ–π handler.

### –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π handler (JSON + –ª–æ–≥–∏–∫–∞)

```go
http.HandleFunc("/user", func(w http.ResponseWriter, r *http.Request) {
	data := map[string]string{
		"id":   "42",
		"name": "Artem",
	}

	b, _ := json.Marshal(data)
	w.Header().Set("Content-Type", "application/json")
	w.Write(b)
})
```
> <br /> RPS —É–ø–∞–¥—ë—Ç ‚Äî –∏ —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ.

## –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ Go (–±–µ–∑ wrk)

```go
func main() {
	client := &http.Client{}
	var wg sync.WaitGroup

	start := time.Now()
	total := 100_000

	for i := 0; i < total; i++ {
		wg.Add(1)
		go func() {
			defer wg.Done()
			req, _ := http.NewRequest("GET", "http://localhost:8080/ping", nil)
			client.Do(req)
		}()
	}

	wg.Wait()

	fmt.Println("RPS:", float64(total)/time.Since(start).Seconds())
}
```

#### –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:
* —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
* —Å—Ä–∞–≤–Ω–µ–Ω–∏–π
* –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### –¢–∏–ø–∏—á–Ω—ã–µ –±—É—Ç—ã–ª–æ—á–Ω—ã–µ –≥–æ—Ä–ª—ã—à–∫–∏ RPS

#### –ß—Ç–æ —á–∞—â–µ –≤—Å–µ–≥–æ –ª–æ–º–∞–µ—Ç RPS:

* `log.Println` –≤–Ω—É—Ç—Ä–∏ handler
* –∞–ª–ª–æ–∫–∞—Ü–∏–∏ (`map`, `json.Marshal`)
* mutex
* —á—Ç–µ–Ω–∏–µ –∏–∑ –ë–î
* —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π I/O

#### –ß—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç:

* `sync.Pool`
* pre-allocated buffers
* `json.Encoder`
* async –æ–±—Ä–∞–±–æ—Ç–∫–∞
* pprof

### –ê–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ pprof

```go
import _ "net/http/pprof"

go func() {
	http.ListenAndServe(":6060", nil)
}()
```

```bash
go tool pprof http://localhost:6060/debug/pprof/profile
```

#### –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞:
* CPU
* allocs
* goroutines


## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

```go
// –•–æ—Ä–æ—à–æ
func TestUserService_CreateUser_WithValidData_ReturnsUser(t *testing.T) {}
func TestUserService_CreateUser_WithEmptyUsername_ReturnsError(t *testing.T) {}

// –ü–ª–æ—Ö–æ
func TestUser1(t *testing.T) {}
func TestCreateUser(t *testing.T) {}
```

### 2. –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤

```go
// –•–æ—Ä–æ—à–æ: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–∞–±–ª–∏—á–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏ –ø–æ–¥—Ç–µ—Å—Ç—ã
func TestValidation(t *testing.T) {
    tests := []struct {
        name    string
        input   string
        wantErr bool
    }{
        // —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–ª—É—á–∞–∏
    }
    
    for _, tt := range tests {
        t.Run(tt.name, func(t *testing.T) {
            // —Ç–µ—Å—Ç
        })
    }
}
```

### 3. –ò–∑–æ–ª—è—Ü–∏—è —Ç–µ—Å—Ç–æ–≤

```go
// –•–æ—Ä–æ—à–æ: –∫–∞–∂–¥—ã–π —Ç–µ—Å—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º
func TestFeatureA(t *testing.T) {
    data := setupTestData()
    defer cleanupTestData(data)
    // —Ç–µ—Å—Ç
}

// –ü–ª–æ—Ö–æ: —Ç–µ—Å—Ç—ã –∑–∞–≤–∏—Å—è—Ç –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞
var globalState int

func TestFeatureA(t *testing.T) {
    globalState = 1
}

func TestFeatureB(t *testing.T) {
    // –ó–∞–≤–∏—Å–∏—Ç –æ—Ç TestFeatureA
    if globalState != 1 {
        t.Fatal("–Ω–µ–≤–µ—Ä–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ")
    }
}
```

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä–∞–Ω–∏—Ü

```go
func TestDivide(t *testing.T) {
    tests := []struct {
        name      string
        a, b      float64
        want      float64
        wantError bool
    }{
        {"–æ–±—ã—á–Ω—ã–π —Å–ª—É—á–∞–π", 10, 2, 5, false},
        {"–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å", 10, 0, 0, true},
        {"–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞", -10, 2, -5, false},
        {"–æ—á–µ–Ω—å –±–æ–ª—å—à–∏–µ —á–∏—Å–ª–∞", 1e308, 2, 5e307, false},
        {"–æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏–µ —á–∏—Å–ª–∞", 1e-308, 2, 5e-309, false},
    }
    // ...
}
```

## –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ (Code Coverage)

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –æ –ø–æ–∫—Ä—ã—Ç–∏–∏
go test -coverprofile=coverage.out

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ü–µ–Ω—Ç–∞ –ø–æ–∫—Ä—ã—Ç–∏—è
go tool cover -func=coverage.out

# –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∫—Ä—ã—Ç–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ
go tool cover -html=coverage.out

# –ü–æ–∫—Ä—ã—Ç–∏–µ –¥–ª—è –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–æ–≤
go test -coverprofile=coverage.out ./...

# –ü–æ–∫—Ä—ã—Ç–∏–µ —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–æ –ø–∞–∫–µ—Ç–∞–º
go test -coverpkg=./... -coverprofile=coverage.out ./...
```

## –¢–µ—Å—Ç–æ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã

```go
// –§–∞–π–ª: testutil/testutil.go
package testutil

import (
    "io/ioutil"
    "os"
    "path/filepath"
    "testing"
)

// CreateTempDir —Å–æ–∑–¥–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è —Ç–µ—Å—Ç–æ–≤
func CreateTempDir(t *testing.T) string {
    t.Helper()
    
    dir, err := ioutil.TempDir("", "test-*")
    if err != nil {
        t.Fatalf("–Ω–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é: %v", err)
    }
    
    t.Cleanup(func() {
        os.RemoveAll(dir)
    })
    
    return dir
}

// CreateTestFile —Å–æ–∑–¥–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º
func CreateTestFile(t *testing.T, dir, filename, content string) string {
    t.Helper()
    
    path := filepath.Join(dir, filename)
    if err := ioutil.WriteFile(path, []byte(content), 0644); err != nil {
        t.Fatalf("–Ω–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª: %v", err)
    }
    
    return path
}

// AssertEqual –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ –∑–Ω–∞—á–µ–Ω–∏–π
func AssertEqual(t *testing.T, got, want interface{}) {
    t.Helper()
    if got != want {
        t.Errorf("got %v, want %v", got, want)
    }
}

// AssertError –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–∫–∏
func AssertError(t *testing.T, err error) {
    t.Helper()
    if err == nil {
        t.Error("–æ–∂–∏–¥–∞–ª–∞—Å—å –æ—à–∏–±–∫–∞, –ø–æ–ª—É—á–µ–Ω–æ nil")
    }
}

// AssertNoError –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–∫–∏
func AssertNoError(t *testing.T, err error) {
    t.Helper()
    if err != nil {
        t.Errorf("–Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: %v", err)
    }
}
```
